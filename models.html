
<html>
    <head>
        <title>Coverage Report</title>
        
        <style type="text/css">
            body { background-color: #fff; }
            table {
                margin-left: 10px;
                border-collapse: collapse;
            }
            td { 
                background-color: #fff; 
                padding: 2px;
            }
            table.overview td {
                padding-right: 20px;
            }
            td.percent, td.linecount { text-align: right; }
            div.package, #totalcov { 
                color: #fff;
                background-color: #375eab; 
                font-size: 16px;
                font-weight: bold;
                padding: 10px;
                border-radius: 5px 5px 5px 5px;
            }
            div.package, #totalcov { 
                float: right; 
                right: 10px;
            }
            #totalcov { 
                top: 10px;
                position: relative;
                background-color: #fff;
                color: #000;
                border: 1px solid #375eab;
                clear: both;
            }
            #summaryWrapper {
                position: fixed;
                top: 10px;
                float: right;
                right: 10px;

            }
            span.packageTotal {
                float: right;
                color: #000;
            }
            #doctitle { 
                background-color: #fff; 
                font-size: 24px;
                margin-top: 20px;
                margin-left: 10px;
                color: #375eab;
                font-weight: bold;
            }
            #about {
                margin-left: 18px;
                font-size: 10px;
            }
            table tr:last-child td {
                font-weight: bold;
            }
            .functitle, .funcname { 
                text-align: center; 
                font-size: 20px; 
                font-weight: bold; 
                color: 375eab; 
            }
            .funcname {
                text-align: left;
                margin-top: 20px;
                margin-left: 10px;
                margin-bottom: 20px;
                padding: 2px 5px 5px;
                background-color: #e0ebf5;
            }
            table.listing {
                margin-left: 10px;
            }
            table.listing td {
                padding: 0px;
                font-size: 12px;
                background-color: #eee; 
                vertical-align: top;
                padding-left: 10px;
                border-bottom: 1px solid #fff;
            }
            table.listing td:first-child {
                text-align: right;
                font-weight: bold;
                vertical-align: center;
            }
            table.listing tr.miss td {
                background-color: #FFBBB8;
            }
            table.listing tr:last-child td {
                font-weight: normal;
                color: #000;
            }
            table.listing tr:last-child td:first-child {
                font-weight: bold;
            }
            .info {
                margin-left: 10px;
            }
            .info code {
            }
            pre { margin: 1px; }
            pre.cmd { 
                background-color: #e9e9e9;
                border-radius: 5px 5px 5px 5px;
                padding: 10px;
                margin: 20px;
                line-height: 18px;
                font-size; 14px;
            }
            a { 
                text-decoration: none; 
                color: #375eab;
            }
            a:hover { text-decoration: underline; }
            p { margin-left: 10px; }
        </style>
        
    </head>
    <body>
        <div id="doctitle">Coverage Report</div>
    <div id="about">Generated on 13 Jan 16 13:46 +0000 with <a href="https://github.com/matm/gocov-html">gocov-html</a></div><div id="pkg_github.com/TF2Stadium/Helen/models" class="funcname">Package Overview: github.com/TF2Stadium/Helen/models <span class="packageTotal">68.31%</span></div><p>This is a coverage report created after analysis of the <code>github.com/TF2Stadium/Helen/models</code> package. It 
        has been generated with the following command:</p><pre class="cmd">gocov test github.com/TF2Stadium/Helen/models | gocov-html</pre>        <p>Here are the stats. Please select a function name to view its implementation and see what's left for testing.</p><table class="overview">
<tr id="s_fn_LobbySettingsToJSON"><td><code><a href="#fn_LobbySettingsToJSON">LobbySettingsToJSON(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>56/56</code></td></tr>
<tr id="s_fn_Lobby.FitsRequirements"><td><code><a href="#fn_Lobby.FitsRequirements">Lobby.FitsRequirements(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>17/17</code></td></tr>
<tr id="s_fn_Lobby.Close"><td><code><a href="#fn_Lobby.Close">Lobby.Close(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>11/11</code></td></tr>
<tr id="s_fn_Player.GetLobbyID"><td><code><a href="#fn_Player.GetLobbyID">Player.GetLobbyID(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>8/8</code></td></tr>
<tr id="s_fn_Player.SetSetting"><td><code><a href="#fn_Player.SetSetting">Player.SetSetting(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>7/7</code></td></tr>
<tr id="s_fn_DeleteUnusedServerRecords"><td><code><a href="#fn_DeleteUnusedServerRecords">DeleteUnusedServerRecords(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>7/7</code></td></tr>
<tr id="s_fn_LobbyGetPlayerSlot"><td><code><a href="#fn_LobbyGetPlayerSlot">LobbyGetPlayerSlot(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/classMaps.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>7/7</code></td></tr>
<tr id="s_fn_GetAllSubs"><td><code><a href="#fn_GetAllSubs">GetAllSubs(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/substitute.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>6/6</code></td></tr>
<tr id="s_fn_Lobby.Save"><td><code><a href="#fn_Lobby.Save">Lobby.Save(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>6/6</code></td></tr>
<tr id="s_fn_GetPlayerSubs"><td><code><a href="#fn_GetPlayerSubs">GetPlayerSubs(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/substitute.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>6/6</code></td></tr>
<tr id="s_fn_LobbyGetSlotInfoString"><td><code><a href="#fn_LobbyGetSlotInfoString">LobbyGetSlotInfoString(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/classMaps.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>5/5</code></td></tr>
<tr id="s_fn_Player.Save"><td><code><a href="#fn_Player.Save">Player.Save(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>5/5</code></td></tr>
<tr id="s_fn_Player.IsBannedWithTime"><td><code><a href="#fn_Player.IsBannedWithTime">Player.IsBannedWithTime(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>5/5</code></td></tr>
<tr id="s_fn_Lobby.OnChange"><td><code><a href="#fn_Lobby.OnChange">Lobby.OnChange(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>4/4</code></td></tr>
<tr id="s_fn_Lobby.HasGeneralRequirement"><td><code><a href="#fn_Lobby.HasGeneralRequirement">Lobby.HasGeneralRequirement(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.IsEveryoneReady"><td><code><a href="#fn_Lobby.IsEveryoneReady">Lobby.IsEveryoneReady(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.UnreadyAllPlayers"><td><code><a href="#fn_Lobby.UnreadyAllPlayers">Lobby.UnreadyAllPlayers(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.FillSubstitute"><td><code><a href="#fn_Lobby.FillSubstitute">Lobby.FillSubstitute(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.SlotNeedsSubstitute"><td><code><a href="#fn_Lobby.SlotNeedsSubstitute">Lobby.SlotNeedsSubstitute(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.GetPlayerIDBySlot"><td><code><a href="#fn_Lobby.GetPlayerIDBySlot">Lobby.GetPlayerIDBySlot(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.HasPlayer"><td><code><a href="#fn_Lobby.HasPlayer">Lobby.HasPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Player.GetSettings"><td><code><a href="#fn_Player.GetSettings">Player.GetSettings(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_NewBotMessage"><td><code><a href="#fn_NewBotMessage">NewBotMessage(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_GetRoomMessages"><td><code><a href="#fn_GetRoomMessages">GetRoomMessages(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_GetPlayerMessages"><td><code><a href="#fn_GetPlayerMessages">GetPlayerMessages(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Player.GetSetting"><td><code><a href="#fn_Player.GetSetting">Player.GetSetting(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.GetPlayerSlotObj"><td><code><a href="#fn_Lobby.GetPlayerSlotObj">Lobby.GetPlayerSlotObj(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_BroadcastLobbyList"><td><code><a href="#fn_BroadcastLobbyList">BroadcastLobbyList(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.setInGameStatus"><td><code><a href="#fn_Lobby.setInGameStatus">Lobby.setInGameStatus(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.GetGeneralRequirement"><td><code><a href="#fn_Lobby.GetGeneralRequirement">Lobby.GetGeneralRequirement(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.GetSlotRequirement"><td><code><a href="#fn_Lobby.GetSlotRequirement">Lobby.GetSlotRequirement(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Lobby.HasSlotRequirement"><td><code><a href="#fn_Lobby.HasSlotRequirement">Lobby.HasSlotRequirement(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>3/3</code></td></tr>
<tr id="s_fn_Player.BanUntil"><td><code><a href="#fn_Player.BanUntil">Player.BanUntil(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_NewChatMessage"><td><code><a href="#fn_NewChatMessage">NewChatMessage(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_SendNotification"><td><code><a href="#fn_SendNotification">SendNotification(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_NewLobby"><td><code><a href="#fn_NewLobby">NewLobby(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_Lobby.GetPlayerSlot"><td><code><a href="#fn_Lobby.GetPlayerSlot">Lobby.GetPlayerSlot(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_Lobby.BanPlayer"><td><code><a href="#fn_Lobby.BanPlayer">Lobby.BanPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_LogCustomAdminAction"><td><code><a href="#fn_LogCustomAdminAction">LogCustomAdminAction(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/admin_log.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_BroadcastLobby"><td><code><a href="#fn_BroadcastLobby">BroadcastLobby(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_Player.IsBanned"><td><code><a href="#fn_Player.IsBanned">Player.IsBanned(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_PlayerStats.IncreaseSubCount"><td><code><a href="#fn_PlayerStats.IncreaseSubCount">PlayerStats.IncreaseSubCount(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/playerStats.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_decoratePlayerTags"><td><code><a href="#fn_decoratePlayerTags">decoratePlayerTags(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player_decorators.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>2/2</code></td></tr>
<tr id="s_fn_PlayerStats.TotalLobbies"><td><code><a href="#fn_PlayerStats.TotalLobbies">PlayerStats.TotalLobbies(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/playerStats.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_BroadcastSubList"><td><code><a href="#fn_BroadcastSubList">BroadcastSubList(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/substitute.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Lobby.HasRequirements"><td><code><a href="#fn_Lobby.HasRequirements">Lobby.HasRequirements(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_DecorateLobbyClosed"><td><code><a href="#fn_DecorateLobbyClosed">DecorateLobbyClosed(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_DecorateLobbyLeave"><td><code><a href="#fn_DecorateLobbyLeave">DecorateLobbyLeave(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Player.Unban"><td><code><a href="#fn_Player.Unban">Player.Unban(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Requirement.Save"><td><code><a href="#fn_Requirement.Save">Requirement.Save(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Lobby.SetInGame"><td><code><a href="#fn_Lobby.SetInGame">Lobby.SetInGame(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Lobby.SetNotInGame"><td><code><a href="#fn_Lobby.SetNotInGame">Lobby.SetNotInGame(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Substitute.Save"><td><code><a href="#fn_Substitute.Save">Substitute.Save(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/substitute.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_LogAdminAction"><td><code><a href="#fn_LogAdminAction">LogAdminAction(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/admin_log.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_ChatMessage.Save"><td><code><a href="#fn_ChatMessage.Save">ChatMessage.Save(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_Lobby.RealAfterSave"><td><code><a href="#fn_Lobby.RealAfterSave">Lobby.RealAfterSave(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>100.00%</code></td><td class="linecount"><code>1/1</code></td></tr>
<tr id="s_fn_DecorateLobbyData"><td><code><a href="#fn_DecorateLobbyData">DecorateLobbyData(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>96.43%</code></td><td class="linecount"><code>27/28</code></td></tr>
<tr id="s_fn_NewSub"><td><code><a href="#fn_NewSub">NewSub(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/substitute.go</code></td><td class="percent"><code>94.74%</code></td><td class="linecount"><code>18/19</code></td></tr>
<tr id="s_fn_Lobby.RemoveUnreadyPlayers"><td><code><a href="#fn_Lobby.RemoveUnreadyPlayers">Lobby.RemoveUnreadyPlayers(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>92.31%</code></td><td class="linecount"><code>12/13</code></td></tr>
<tr id="s_fn_Lobby.AddPlayer"><td><code><a href="#fn_Lobby.AddPlayer">Lobby.AddPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>88.89%</code></td><td class="linecount"><code>40/45</code></td></tr>
<tr id="s_fn_decorateSlotDetails"><td><code><a href="#fn_decorateSlotDetails">decorateSlotDetails(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>88.24%</code></td><td class="linecount"><code>15/17</code></td></tr>
<tr id="s_fn_LoadLobbySettings"><td><code><a href="#fn_LoadLobbySettings">LoadLobbySettings(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>86.67%</code></td><td class="linecount"><code>39/45</code></td></tr>
<tr id="s_fn_Lobby.UpdateStats"><td><code><a href="#fn_Lobby.UpdateStats">Lobby.UpdateStats(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>83.33%</code></td><td class="linecount"><code>10/12</code></td></tr>
<tr id="s_fn_GetLobbyByID"><td><code><a href="#fn_GetLobbyByID">GetLobbyByID(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>83.33%</code></td><td class="linecount"><code>5/6</code></td></tr>
<tr id="s_fn_LobbyMap.GetFormat"><td><code><a href="#fn_LobbyMap.GetFormat">LobbyMap.GetFormat(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>83.33%</code></td><td class="linecount"><code>5/6</code></td></tr>
<tr id="s_fn_LobbyGetSlotInfo"><td><code><a href="#fn_LobbyGetSlotInfo">LobbyGetSlotInfo(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/classMaps.go</code></td><td class="percent"><code>83.33%</code></td><td class="linecount"><code>5/6</code></td></tr>
<tr id="s_fn_Lobby.RemovePlayer"><td><code><a href="#fn_Lobby.RemovePlayer">Lobby.RemovePlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>83.33%</code></td><td class="linecount"><code>5/6</code></td></tr>
<tr id="s_fn_GetLobbyByIDServer"><td><code><a href="#fn_GetLobbyByIDServer">GetLobbyByIDServer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>83.33%</code></td><td class="linecount"><code>5/6</code></td></tr>
<tr id="s_fn_Lobby.SubNotInGamePlayers"><td><code><a href="#fn_Lobby.SubNotInGamePlayers">Lobby.SubNotInGamePlayers(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>82.35%</code></td><td class="linecount"><code>14/17</code></td></tr>
<tr id="s_fn_Player.GetActiveBans"><td><code><a href="#fn_Player.GetActiveBans">Player.GetActiveBans(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Lobby.ReadyPlayer"><td><code><a href="#fn_Lobby.ReadyPlayer">Lobby.ReadyPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Lobby.UnreadyPlayer"><td><code><a href="#fn_Lobby.UnreadyPlayer">Lobby.UnreadyPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Lobby.IsPlayerInGame"><td><code><a href="#fn_Lobby.IsPlayerInGame">Lobby.IsPlayerInGame(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Lobby.IsPlayerReady"><td><code><a href="#fn_Lobby.IsPlayerReady">Lobby.IsPlayerReady(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Lobby.AddSpectator"><td><code><a href="#fn_Lobby.AddSpectator">Lobby.AddSpectator(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_DecoratePlayerSummary"><td><code><a href="#fn_DecoratePlayerSummary">DecoratePlayerSummary(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player_decorators.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Player.GetSpectatingIds"><td><code><a href="#fn_Player.GetSpectatingIds">Player.GetSpectatingIds(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Player.IsSpectatingID"><td><code><a href="#fn_Player.IsSpectatingID">Player.IsSpectatingID(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_GetPlayerWithStats"><td><code><a href="#fn_GetPlayerWithStats">GetPlayerWithStats(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_GetPlayerBySteamID"><td><code><a href="#fn_GetPlayerBySteamID">GetPlayerBySteamID(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_Lobby.GetPlayerNumber"><td><code><a href="#fn_Lobby.GetPlayerNumber">Lobby.GetPlayerNumber(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>80.00%</code></td><td class="linecount"><code>4/5</code></td></tr>
<tr id="s_fn_GetPlayerByID"><td><code><a href="#fn_GetPlayerByID">GetPlayerByID(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>75.00%</code></td><td class="linecount"><code>3/4</code></td></tr>
<tr id="s_fn_Lobby.RemoveSpectator"><td><code><a href="#fn_Lobby.RemoveSpectator">Lobby.RemoveSpectator(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>4/6</code></td></tr>
<tr id="s_fn_GetLobbyMap"><td><code><a href="#fn_GetLobbyMap">GetLobbyMap(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr id="s_fn_Say"><td><code><a href="#fn_Say">Say(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr id="s_fn_DisallowPlayer"><td><code><a href="#fn_DisallowPlayer">DisallowPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr id="s_fn_End"><td><code><a href="#fn_End">End(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr id="s_fn_GetLobbyLeague"><td><code><a href="#fn_GetLobbyLeague">GetLobbyLeague(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr id="s_fn_GetLobbyFormat"><td><code><a href="#fn_GetLobbyFormat">GetLobbyFormat(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>66.67%</code></td><td class="linecount"><code>2/3</code></td></tr>
<tr id="s_fn_DecorateLobbyListData"><td><code><a href="#fn_DecorateLobbyListData">DecorateLobbyListData(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>60.00%</code></td><td class="linecount"><code>3/5</code></td></tr>
<tr id="s_fn_NewPlayer"><td><code><a href="#fn_NewPlayer">NewPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>50.00%</code></td><td class="linecount"><code>4/8</code></td></tr>
<tr id="s_fn_Player.Alias"><td><code><a href="#fn_Player.Alias">Player.Alias(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>50.00%</code></td><td class="linecount"><code>3/6</code></td></tr>
<tr id="s_fn_FumbleLobbyPlayerJoined"><td><code><a href="#fn_FumbleLobbyPlayerJoined">FumbleLobbyPlayerJoined(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/fumble.go</code></td><td class="percent"><code>50.00%</code></td><td class="linecount"><code>2/4</code></td></tr>
<tr id="s_fn_FumbleLobbyPlayerJoinedSub"><td><code><a href="#fn_FumbleLobbyPlayerJoinedSub">FumbleLobbyPlayerJoinedSub(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/fumble.go</code></td><td class="percent"><code>50.00%</code></td><td class="linecount"><code>2/4</code></td></tr>
<tr id="s_fn_PlayerStats.PlayedCountIncrease"><td><code><a href="#fn_PlayerStats.PlayedCountIncrease">PlayerStats.PlayedCountIncrease(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/playerStats.go</code></td><td class="percent"><code>42.86%</code></td><td class="linecount"><code>3/7</code></td></tr>
<tr id="s_fn_getGamemode"><td><code><a href="#fn_getGamemode">getGamemode(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>23.08%</code></td><td class="linecount"><code>3/13</code></td></tr>
<tr id="s_fn_Player.UpdatePlayerInfo"><td><code><a href="#fn_Player.UpdatePlayerInfo">Player.UpdatePlayerInfo(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player.go</code></td><td class="percent"><code>11.11%</code></td><td class="linecount"><code>2/18</code></td></tr>
<tr id="s_fn_DecoratePlayerProfileJson"><td><code><a href="#fn_DecoratePlayerProfileJson">DecoratePlayerProfileJson(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/14</code></td></tr>
<tr id="s_fn_DecorateLobbyConnect"><td><code><a href="#fn_DecorateLobbyConnect">DecorateLobbyConnect(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/11</code></td></tr>
<tr id="s_fn_GetScrollback"><td><code><a href="#fn_GetScrollback">GetScrollback(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/10</code></td></tr>
<tr id="s_fn_FumbleLobbyStarted"><td><code><a href="#fn_FumbleLobbyStarted">FumbleLobbyStarted(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/fumble.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/10</code></td></tr>
<tr id="s_fn_fumbleAllowPlayer"><td><code><a href="#fn_fumbleAllowPlayer">fumbleAllowPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/fumble.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/9</code></td></tr>
<tr id="s_fn_call"><td><code><a href="#fn_call">call(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/8</code></td></tr>
<tr id="s_fn_SubAndRemove"><td><code><a href="#fn_SubAndRemove">SubAndRemove(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/substitute.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/8</code></td></tr>
<tr id="s_fn_InitializeLobbySettings"><td><code><a href="#fn_InitializeLobbySettings">InitializeLobbySettings(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/7</code></td></tr>
<tr id="s_fn_FumbleLobbyCreated"><td><code><a href="#fn_FumbleLobbyCreated">FumbleLobbyCreated(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/fumble.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/7</code></td></tr>
<tr id="s_fn_IsPlayerInServer"><td><code><a href="#fn_IsPlayerInServer">IsPlayerInServer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/5</code></td></tr>
<tr id="s_fn_FumbleLobbyEnded"><td><code><a href="#fn_FumbleLobbyEnded">FumbleLobbyEnded(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/fumble.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/5</code></td></tr>
<tr id="s_fn_sanitize"><td><code><a href="#fn_sanitize">sanitize(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/5</code></td></tr>
<tr id="s_fn_Lobby.SetupServer"><td><code><a href="#fn_Lobby.SetupServer">Lobby.SetupServer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/4</code></td></tr>
<tr id="s_fn_CheckConnection"><td><code><a href="#fn_CheckConnection">CheckConnection(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/4</code></td></tr>
<tr id="s_fn_DecoratePlayerSettingsJson"><td><code><a href="#fn_DecoratePlayerSettingsJson">DecoratePlayerSettingsJson(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/player_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/4</code></td></tr>
<tr id="s_fn_LoadLobbySettingsFromFile"><td><code><a href="#fn_LoadLobbySettingsFromFile">LoadLobbySettingsFromFile(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/4</code></td></tr>
<tr id="s_fn_SetupServer"><td><code><a href="#fn_SetupServer">SetupServer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/4</code></td></tr>
<tr id="s_fn_Lobby.IsSlotFilled"><td><code><a href="#fn_Lobby.IsSlotFilled">Lobby.IsSlotFilled(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/4</code></td></tr>
<tr id="s_fn_ReExecConfig"><td><code><a href="#fn_ReExecConfig">ReExecConfig(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/3</code></td></tr>
<tr id="s_fn_ChatMessage.Send"><td><code><a href="#fn_ChatMessage.Send">ChatMessage.Send(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/3</code></td></tr>
<tr id="s_fn_NewRequirement"><td><code><a href="#fn_NewRequirement">NewRequirement(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/3</code></td></tr>
<tr id="s_fn_GetLobbyWhitelist"><td><code><a href="#fn_GetLobbyWhitelist">GetLobbyWhitelist(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobbySettings.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/3</code></td></tr>
<tr id="s_fn_Lobby.CurrentState"><td><code><a href="#fn_Lobby.CurrentState">Lobby.CurrentState(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/3</code></td></tr>
<tr id="s_fn_VerifyInfo"><td><code><a href="#fn_VerifyInfo">VerifyInfo(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/pauling.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/3</code></td></tr>
<tr id="s_fn_@741:32"><td><code><a href="#fn_@741:32">@741:32(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/2</code></td></tr>
<tr id="s_fn_Lobby.Start"><td><code><a href="#fn_Lobby.Start">Lobby.Start(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/2</code></td></tr>
<tr id="s_fn_NewPlayerStats"><td><code><a href="#fn_NewPlayerStats">NewPlayerStats(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/playerStats.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/2</code></td></tr>
<tr id="s_fn_LobbyData.SendToPlayer"><td><code><a href="#fn_LobbyData.SendToPlayer">LobbyData.SendToPlayer(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_DecorateLobbyJoin"><td><code><a href="#fn_DecorateLobbyJoin">DecorateLobbyJoin(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_NewInGameChatMessage"><td><code><a href="#fn_NewInGameChatMessage">NewInGameChatMessage(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/chat.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_Lobby.IsFull"><td><code><a href="#fn_Lobby.IsFull">Lobby.IsFull(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_BroadcastLobbyToUser"><td><code><a href="#fn_BroadcastLobbyToUser">BroadcastLobbyToUser(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_Lobby.ReadyUpTimeLeft"><td><code><a href="#fn_Lobby.ReadyUpTimeLeft">Lobby.ReadyUpTimeLeft(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_Lobby.LobbyData"><td><code><a href="#fn_Lobby.LobbyData">Lobby.LobbyData(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr id="s_fn_LobbyData.Send"><td><code><a href="#fn_LobbyData.Send">LobbyData.Send(...)</a></code></td><td><code>github.com/TF2Stadium/Helen/models/lobby_decorators.go</code></td><td class="percent"><code>0.00%</code></td><td class="linecount"><code>0/1</code></td></tr>
<tr><td colspan="2"><code>github.com/TF2Stadium/Helen/models</code></td><td class="percent"><code>68.31%</code></td><td class="linecount"><code>528/773</code></td></tr>
</table>

<div class="funcname" id="fn_LobbySettingsToJSON">func LobbySettingsToJSON</div><div class="info"><a href="#s_fn_LobbySettingsToJSON">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>270</td><td><code><pre>func LobbySettingsToJSON() *simplejson.Json {</pre></code></td></tr><tr><td>271</td><td><code><pre>        j := simplejson.New()</pre></code></td></tr><tr><td>272</td><td><code><pre></pre></code></td></tr><tr><td>273</td><td><code><pre>        // formats</pre></code></td></tr><tr><td>274</td><td><code><pre>        {</pre></code></td></tr><tr><td>275</td><td><code><pre>                formats := simplejson.New()</pre></code></td></tr><tr><td>276</td><td><code><pre></pre></code></td></tr><tr><td>277</td><td><code><pre>                formatList := make([]*simplejson.Json, len(LobbyFormats))</pre></code></td></tr><tr><td>278</td><td><code><pre>                for i, format := range LobbyFormats {</pre></code></td></tr><tr><td>279</td><td><code><pre>                        f := simplejson.New()</pre></code></td></tr><tr><td>280</td><td><code><pre>                        f.Set(&#34;value&#34;, format.Name)</pre></code></td></tr><tr><td>281</td><td><code><pre>                        f.Set(&#34;title&#34;, format.PrettyName)</pre></code></td></tr><tr><td>282</td><td><code><pre>                        f.Set(&#34;important&#34;, format.Important)</pre></code></td></tr><tr><td>283</td><td><code><pre></pre></code></td></tr><tr><td>284</td><td><code><pre>                        formatList[i] = f</pre></code></td></tr><tr><td>285</td><td><code><pre>                }</pre></code></td></tr><tr><td>286</td><td><code><pre>                formats.Set(&#34;key&#34;, &#34;type&#34;)</pre></code></td></tr><tr><td>287</td><td><code><pre>                formats.Set(&#34;title&#34;, &#34;Format&#34;)</pre></code></td></tr><tr><td>288</td><td><code><pre>                formats.Set(&#34;options&#34;, formatList)</pre></code></td></tr><tr><td>289</td><td><code><pre></pre></code></td></tr><tr><td>290</td><td><code><pre>                j.Set(&#34;formats&#34;, formats)</pre></code></td></tr><tr><td>291</td><td><code><pre>        }</pre></code></td></tr><tr><td>292</td><td><code><pre></pre></code></td></tr><tr><td>293</td><td><code><pre>        // maps</pre></code></td></tr><tr><td>294</td><td><code><pre>        {</pre></code></td></tr><tr><td>295</td><td><code><pre>                maps := simplejson.New()</pre></code></td></tr><tr><td>296</td><td><code><pre></pre></code></td></tr><tr><td>297</td><td><code><pre>                mapList := make([]*simplejson.Json, len(LobbyMaps))</pre></code></td></tr><tr><td>298</td><td><code><pre>                for i, amap := range LobbyMaps {</pre></code></td></tr><tr><td>299</td><td><code><pre>                        f := simplejson.New()</pre></code></td></tr><tr><td>300</td><td><code><pre>                        f.Set(&#34;value&#34;, amap.Name)</pre></code></td></tr><tr><td>301</td><td><code><pre>                        for _, mapFormat := range amap.Formats {</pre></code></td></tr><tr><td>302</td><td><code><pre>                                f.Set(mapFormat.Format.Name, mapFormat.Importance)</pre></code></td></tr><tr><td>303</td><td><code><pre>                        }</pre></code></td></tr><tr><td>304</td><td><code><pre></pre></code></td></tr><tr><td>305</td><td><code><pre>                        mapList[i] = f</pre></code></td></tr><tr><td>306</td><td><code><pre>                }</pre></code></td></tr><tr><td>307</td><td><code><pre>                maps.Set(&#34;key&#34;, &#34;mapName&#34;)</pre></code></td></tr><tr><td>308</td><td><code><pre>                maps.Set(&#34;title&#34;, &#34;Map&#34;)</pre></code></td></tr><tr><td>309</td><td><code><pre>                maps.Set(&#34;options&#34;, mapList)</pre></code></td></tr><tr><td>310</td><td><code><pre></pre></code></td></tr><tr><td>311</td><td><code><pre>                j.Set(&#34;maps&#34;, maps)</pre></code></td></tr><tr><td>312</td><td><code><pre>        }</pre></code></td></tr><tr><td>313</td><td><code><pre></pre></code></td></tr><tr><td>314</td><td><code><pre>        // leagues</pre></code></td></tr><tr><td>315</td><td><code><pre>        {</pre></code></td></tr><tr><td>316</td><td><code><pre>                leagues := simplejson.New()</pre></code></td></tr><tr><td>317</td><td><code><pre></pre></code></td></tr><tr><td>318</td><td><code><pre>                leagueList := make([]*simplejson.Json, len(LobbyLeagues))</pre></code></td></tr><tr><td>319</td><td><code><pre>                for i, league := range LobbyLeagues {</pre></code></td></tr><tr><td>320</td><td><code><pre>                        leagueDescs := simplejson.New()</pre></code></td></tr><tr><td>321</td><td><code><pre>                        for _, leagueDesc := range league.Descriptions {</pre></code></td></tr><tr><td>322</td><td><code><pre>                                leagueDescs.Set(string(leagueDesc.MapType), leagueDesc.Description)</pre></code></td></tr><tr><td>323</td><td><code><pre>                        }</pre></code></td></tr><tr><td>324</td><td><code><pre></pre></code></td></tr><tr><td>325</td><td><code><pre>                        f := simplejson.New()</pre></code></td></tr><tr><td>326</td><td><code><pre>                        f.Set(&#34;value&#34;, league.Name)</pre></code></td></tr><tr><td>327</td><td><code><pre>                        f.Set(&#34;title&#34;, league.PrettyName)</pre></code></td></tr><tr><td>328</td><td><code><pre>                        f.Set(&#34;descriptions&#34;, leagueDescs)</pre></code></td></tr><tr><td>329</td><td><code><pre>                        for _, leagueFormat := range league.Formats {</pre></code></td></tr><tr><td>330</td><td><code><pre>                                f.Set(leagueFormat.Format.Name, leagueFormat.Used)</pre></code></td></tr><tr><td>331</td><td><code><pre>                        }</pre></code></td></tr><tr><td>332</td><td><code><pre></pre></code></td></tr><tr><td>333</td><td><code><pre>                        leagueList[i] = f</pre></code></td></tr><tr><td>334</td><td><code><pre>                }</pre></code></td></tr><tr><td>335</td><td><code><pre>                leagues.Set(&#34;key&#34;, &#34;league&#34;)</pre></code></td></tr><tr><td>336</td><td><code><pre>                leagues.Set(&#34;title&#34;, &#34;League&#34;)</pre></code></td></tr><tr><td>337</td><td><code><pre>                leagues.Set(&#34;options&#34;, leagueList)</pre></code></td></tr><tr><td>338</td><td><code><pre></pre></code></td></tr><tr><td>339</td><td><code><pre>                j.Set(&#34;leagues&#34;, leagues)</pre></code></td></tr><tr><td>340</td><td><code><pre>        }</pre></code></td></tr><tr><td>341</td><td><code><pre></pre></code></td></tr><tr><td>342</td><td><code><pre>        // whitelists</pre></code></td></tr><tr><td>343</td><td><code><pre>        {</pre></code></td></tr><tr><td>344</td><td><code><pre>                whitelists := simplejson.New()</pre></code></td></tr><tr><td>345</td><td><code><pre></pre></code></td></tr><tr><td>346</td><td><code><pre>                whitelistList := make([]*simplejson.Json, len(LobbyWhitelists))</pre></code></td></tr><tr><td>347</td><td><code><pre>                for i, whitelist := range LobbyWhitelists {</pre></code></td></tr><tr><td>348</td><td><code><pre>                        f := simplejson.New()</pre></code></td></tr><tr><td>349</td><td><code><pre>                        f.Set(&#34;value&#34;, whitelist.ID)</pre></code></td></tr><tr><td>350</td><td><code><pre>                        f.Set(&#34;title&#34;, whitelist.PrettyName)</pre></code></td></tr><tr><td>351</td><td><code><pre>                        f.Set(&#34;league&#34;, whitelist.League.Name)</pre></code></td></tr><tr><td>352</td><td><code><pre>                        f.Set(&#34;format&#34;, whitelist.Format.Name)</pre></code></td></tr><tr><td>353</td><td><code><pre></pre></code></td></tr><tr><td>354</td><td><code><pre>                        whitelistList[i] = f</pre></code></td></tr><tr><td>355</td><td><code><pre>                }</pre></code></td></tr><tr><td>356</td><td><code><pre>                whitelists.Set(&#34;key&#34;, &#34;whitelist&#34;)</pre></code></td></tr><tr><td>357</td><td><code><pre>                whitelists.Set(&#34;title&#34;, &#34;Whitelist&#34;)</pre></code></td></tr><tr><td>358</td><td><code><pre>                whitelists.Set(&#34;options&#34;, whitelistList)</pre></code></td></tr><tr><td>359</td><td><code><pre></pre></code></td></tr><tr><td>360</td><td><code><pre>                j.Set(&#34;whitelists&#34;, whitelists)</pre></code></td></tr><tr><td>361</td><td><code><pre>        }</pre></code></td></tr><tr><td>362</td><td><code><pre></pre></code></td></tr><tr><td>363</td><td><code><pre>        return j</pre></code></td></tr><tr><td>364</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.FitsRequirements">func Lobby.FitsRequirements</div><div class="info"><a href="#s_fn_Lobby.FitsRequirements">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>194</td><td><code><pre>func (l *Lobby) FitsRequirements(player *Player, slot int) (bool, *helpers.TPError) {</pre></code></td></tr><tr><td>195</td><td><code><pre>        //BUG(vibhavp): FitsRequirements doesn&#39;t check reliability</pre></code></td></tr><tr><td>196</td><td><code><pre>        requirements := []*Requirement{}</pre></code></td></tr><tr><td>197</td><td><code><pre></pre></code></td></tr><tr><td>198</td><td><code><pre>        player.UpdatePlayerInfo()</pre></code></td></tr><tr><td>199</td><td><code><pre>        player.Save()</pre></code></td></tr><tr><td>200</td><td><code><pre></pre></code></td></tr><tr><td>201</td><td><code><pre>        global, err := l.GetGeneralRequirement()</pre></code></td></tr><tr><td>202</td><td><code><pre>        if err == nil {</pre></code></td></tr><tr><td>203</td><td><code><pre>                requirements = append(requirements, global)</pre></code></td></tr><tr><td>204</td><td><code><pre>        }</pre></code></td></tr><tr><td>205</td><td><code><pre></pre></code></td></tr><tr><td>206</td><td><code><pre>        slotReq, err := l.GetSlotRequirement(slot)</pre></code></td></tr><tr><td>207</td><td><code><pre>        if err == nil {</pre></code></td></tr><tr><td>208</td><td><code><pre>                requirements = append(requirements, slotReq)</pre></code></td></tr><tr><td>209</td><td><code><pre>        }</pre></code></td></tr><tr><td>210</td><td><code><pre></pre></code></td></tr><tr><td>211</td><td><code><pre>        stats := PlayerStats{}</pre></code></td></tr><tr><td>212</td><td><code><pre>        db.DB.First(&amp;stats, player.StatsID)</pre></code></td></tr><tr><td>213</td><td><code><pre></pre></code></td></tr><tr><td>214</td><td><code><pre>        for _, req := range requirements {</pre></code></td></tr><tr><td>215</td><td><code><pre>                if player.GameHours &lt; req.Hours {</pre></code></td></tr><tr><td>216</td><td><code><pre>                        return false, ReqHoursErr</pre></code></td></tr><tr><td>217</td><td><code><pre>                }</pre></code></td></tr><tr><td>218</td><td><code><pre></pre></code></td></tr><tr><td>219</td><td><code><pre>                if stats.TotalLobbies() &lt; req.Lobbies {</pre></code></td></tr><tr><td>220</td><td><code><pre>                        return false, ReqLobbiesErr</pre></code></td></tr><tr><td>221</td><td><code><pre>                }</pre></code></td></tr><tr><td>222</td><td><code><pre>        }</pre></code></td></tr><tr><td>223</td><td><code><pre></pre></code></td></tr><tr><td>224</td><td><code><pre>        return true, nil</pre></code></td></tr><tr><td>225</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.Close">func Lobby.Close</div><div class="info"><a href="#s_fn_Lobby.Close">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>654</td><td><code><pre>func (lobby *Lobby) Close(rpc bool) {</pre></code></td></tr><tr><td>655</td><td><code><pre>        db.DB.Table(&#34;substitutes&#34;).Where(&#34;lobby_id = ?&#34;, lobby.ID).UpdateColumn(&#34;filled&#34;, true)</pre></code></td></tr><tr><td>656</td><td><code><pre>        db.DB.First(&amp;lobby).UpdateColumn(&#34;state&#34;, LobbyStateEnded)</pre></code></td></tr><tr><td>657</td><td><code><pre>        db.DB.Table(&#34;server_records&#34;).Where(&#34;id = ?&#34;, lobby.ServerInfoID).Delete(&amp;ServerRecord{})</pre></code></td></tr><tr><td>658</td><td><code><pre>        db.DB.Table(&#34;requirements&#34;).Where(&#34;lobby_id = ?&#34;, lobby.ID).Delete(&amp;Requirement{})</pre></code></td></tr><tr><td>659</td><td><code><pre>        //db.DB.Exec(&#34;DELETE FROM spectators_players_lobbies WHERE lobby_id = ?&#34;, lobby.ID)</pre></code></td></tr><tr><td>660</td><td><code><pre>        if rpc {</pre></code></td></tr><tr><td>661</td><td><code><pre>                End(lobby.ID)</pre></code></td></tr><tr><td>662</td><td><code><pre>        }</pre></code></td></tr><tr><td>663</td><td><code><pre></pre></code></td></tr><tr><td>664</td><td><code><pre>        privateRoom := fmt.Sprintf(&#34;%d_private&#34;, lobby.ID)</pre></code></td></tr><tr><td>665</td><td><code><pre>        broadcaster.SendMessageToRoom(privateRoom, &#34;lobbyLeft&#34;, DecorateLobbyLeave(lobby))</pre></code></td></tr><tr><td>666</td><td><code><pre></pre></code></td></tr><tr><td>667</td><td><code><pre>        publicRoom := fmt.Sprintf(&#34;%d_public&#34;, lobby.ID)</pre></code></td></tr><tr><td>668</td><td><code><pre>        broadcaster.SendMessageToRoom(publicRoom, &#34;lobbyClosed&#34;, DecorateLobbyClosed(lobby))</pre></code></td></tr><tr><td>669</td><td><code><pre></pre></code></td></tr><tr><td>670</td><td><code><pre>        BroadcastLobby(lobby)</pre></code></td></tr><tr><td>671</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.GetLobbyID">func Player.GetLobbyID</div><div class="info"><a href="#s_fn_Player.GetLobbyID">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>144</td><td><code><pre>func (player *Player) GetLobbyID(inProgress bool) (uint, *helpers.TPError) {</pre></code></td></tr><tr><td>145</td><td><code><pre>        playerSlot := &amp;LobbySlot{}</pre></code></td></tr><tr><td>146</td><td><code><pre>        states := []LobbyState{LobbyStateEnded}</pre></code></td></tr><tr><td>147</td><td><code><pre>        if inProgress {</pre></code></td></tr><tr><td>148</td><td><code><pre>                states = append(states, LobbyStateInProgress)</pre></code></td></tr><tr><td>149</td><td><code><pre>        }</pre></code></td></tr><tr><td>150</td><td><code><pre></pre></code></td></tr><tr><td>151</td><td><code><pre>        err := db.DB.Joins(&#34;INNER JOIN lobbies ON lobbies.id = lobby_slots.lobby_id&#34;).</pre></code></td></tr><tr><td>152</td><td><code><pre>                Where(&#34;lobby_slots.player_id = ? AND lobbies.state NOT IN (?)&#34;, player.ID, states).</pre></code></td></tr><tr><td>153</td><td><code><pre>                Find(playerSlot).Error</pre></code></td></tr><tr><td>154</td><td><code><pre></pre></code></td></tr><tr><td>155</td><td><code><pre>        // if the player is not in any lobby, return error</pre></code></td></tr><tr><td>156</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr><td>157</td><td><code><pre>                return 0, helpers.NewTPError(&#34;Player not in any lobby&#34;, 1)</pre></code></td></tr><tr><td>158</td><td><code><pre>        }</pre></code></td></tr><tr><td>159</td><td><code><pre></pre></code></td></tr><tr><td>160</td><td><code><pre>        return playerSlot.LobbyID, nil</pre></code></td></tr><tr><td>161</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.SetSetting">func Player.SetSetting</div><div class="info"><a href="#s_fn_Player.SetSetting">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>224</td><td><code><pre>func (player *Player) SetSetting(key string, value string) error {</pre></code></td></tr><tr><td>225</td><td><code><pre>        setting := PlayerSetting{}</pre></code></td></tr><tr><td>226</td><td><code><pre>        err := db.DB.Where(&#34;player_id = ? AND key = ?&#34;, player.ID, key).First(&amp;setting).Error</pre></code></td></tr><tr><td>227</td><td><code><pre></pre></code></td></tr><tr><td>228</td><td><code><pre>        setting.PlayerID = player.ID</pre></code></td></tr><tr><td>229</td><td><code><pre>        setting.Key = key</pre></code></td></tr><tr><td>230</td><td><code><pre>        setting.Value = value</pre></code></td></tr><tr><td>231</td><td><code><pre></pre></code></td></tr><tr><td>232</td><td><code><pre>        err = db.DB.Save(&amp;setting).Error</pre></code></td></tr><tr><td>233</td><td><code><pre></pre></code></td></tr><tr><td>234</td><td><code><pre>        return err</pre></code></td></tr><tr><td>235</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DeleteUnusedServerRecords">func DeleteUnusedServerRecords</div><div class="info"><a href="#s_fn_DeleteUnusedServerRecords">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>86</td><td><code><pre>func DeleteUnusedServerRecords() {</pre></code></td></tr><tr><td>87</td><td><code><pre>        serverInfoIDs := []uint{}</pre></code></td></tr><tr><td>88</td><td><code><pre>        db.DB.Table(&#34;server_records&#34;).Pluck(&#34;id&#34;, &amp;serverInfoIDs)</pre></code></td></tr><tr><td>89</td><td><code><pre>        for _, id := range serverInfoIDs {</pre></code></td></tr><tr><td>90</td><td><code><pre>                lobby := &amp;Lobby{}</pre></code></td></tr><tr><td>91</td><td><code><pre>                err := db.DB.Where(&#34;server_info_id = ?&#34;, id).First(lobby).Error</pre></code></td></tr><tr><td>92</td><td><code><pre></pre></code></td></tr><tr><td>93</td><td><code><pre>                if err != nil || lobby.State == LobbyStateEnded {</pre></code></td></tr><tr><td>94</td><td><code><pre>                        db.DB.Table(&#34;server_records&#34;).Where(&#34;id = ?&#34;, id).Delete(&amp;ServerRecord{})</pre></code></td></tr><tr><td>95</td><td><code><pre>                }</pre></code></td></tr><tr><td>96</td><td><code><pre>        }</pre></code></td></tr><tr><td>97</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LobbyGetPlayerSlot">func LobbyGetPlayerSlot</div><div class="info"><a href="#s_fn_LobbyGetPlayerSlot">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/classMaps.go</code>:</p></div><table class="listing">
<tr><td>100</td><td><code><pre>func LobbyGetPlayerSlot(lobbytype LobbyType, teamStr string, classStr string) (int, *helpers.TPError) {</pre></code></td></tr><tr><td>101</td><td><code><pre>        team, ok := teamMap[teamStr]</pre></code></td></tr><tr><td>102</td><td><code><pre>        if !ok {</pre></code></td></tr><tr><td>103</td><td><code><pre>                return -1, helpers.NewTPError(&#34;Invalid team&#34;, -1)</pre></code></td></tr><tr><td>104</td><td><code><pre>        }</pre></code></td></tr><tr><td>105</td><td><code><pre></pre></code></td></tr><tr><td>106</td><td><code><pre>        class, ok := typeClassMap[lobbytype][classStr]</pre></code></td></tr><tr><td>107</td><td><code><pre>        if !ok {</pre></code></td></tr><tr><td>108</td><td><code><pre>                return -1, helpers.NewTPError(&#34;Invalid class&#34;, -1)</pre></code></td></tr><tr><td>109</td><td><code><pre>        }</pre></code></td></tr><tr><td>110</td><td><code><pre></pre></code></td></tr><tr><td>111</td><td><code><pre>        return team*NumberOfClassesMap[lobbytype] + class, nil</pre></code></td></tr><tr><td>112</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetAllSubs">func GetAllSubs</div><div class="info"><a href="#s_fn_GetAllSubs">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/substitute.go</code>:</p></div><table class="listing">
<tr><td>79</td><td><code><pre>func GetAllSubs() []*Substitute {</pre></code></td></tr><tr><td>80</td><td><code><pre>        var allSubs []*Substitute</pre></code></td></tr><tr><td>81</td><td><code><pre>        db.DB.Table(&#34;substitutes&#34;).Where(&#34;filled = ?&#34;, false).Find(&amp;allSubs)</pre></code></td></tr><tr><td>82</td><td><code><pre>        for _, sub := range allSubs {</pre></code></td></tr><tr><td>83</td><td><code><pre>                lobby, _ := GetLobbyByID(sub.LobbyID)</pre></code></td></tr><tr><td>84</td><td><code><pre></pre></code></td></tr><tr><td>85</td><td><code><pre>                sub.Team, sub.Class, _ = LobbyGetSlotInfoString(lobby.Type, sub.Slot)</pre></code></td></tr><tr><td>86</td><td><code><pre>        }</pre></code></td></tr><tr><td>87</td><td><code><pre></pre></code></td></tr><tr><td>88</td><td><code><pre>        return allSubs</pre></code></td></tr><tr><td>89</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.Save">func Lobby.Save</div><div class="info"><a href="#s_fn_Lobby.Save">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>313</td><td><code><pre>func (lobby *Lobby) Save() error {</pre></code></td></tr><tr><td>314</td><td><code><pre>        var err error</pre></code></td></tr><tr><td>315</td><td><code><pre>        if db.DB.NewRecord(lobby) {</pre></code></td></tr><tr><td>316</td><td><code><pre>                err = db.DB.Create(lobby).Error</pre></code></td></tr><tr><td>317</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>318</td><td><code><pre>                err = db.DB.Save(lobby).Error</pre></code></td></tr><tr><td>319</td><td><code><pre>        }</pre></code></td></tr><tr><td>320</td><td><code><pre></pre></code></td></tr><tr><td>321</td><td><code><pre>        lobby.RealAfterSave()</pre></code></td></tr><tr><td>322</td><td><code><pre>        return err</pre></code></td></tr><tr><td>323</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetPlayerSubs">func GetPlayerSubs</div><div class="info"><a href="#s_fn_GetPlayerSubs">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/substitute.go</code>:</p></div><table class="listing">
<tr><td>95</td><td><code><pre>func GetPlayerSubs(player *Player) ([]*Substitute, error) {</pre></code></td></tr><tr><td>96</td><td><code><pre>        var subs []*Substitute</pre></code></td></tr><tr><td>97</td><td><code><pre></pre></code></td></tr><tr><td>98</td><td><code><pre>        err := db.DB.Table(&#34;substitutes&#34;).Where(&#34;player_id = ?&#34;, player.ID).Find(&amp;subs).Error</pre></code></td></tr><tr><td>99</td><td><code><pre></pre></code></td></tr><tr><td>100</td><td><code><pre>        for _, sub := range subs {</pre></code></td></tr><tr><td>101</td><td><code><pre>                lobby, _ := GetLobbyByID(sub.LobbyID)</pre></code></td></tr><tr><td>102</td><td><code><pre></pre></code></td></tr><tr><td>103</td><td><code><pre>                sub.Team, sub.Class, _ = LobbyGetSlotInfoString(lobby.Type, sub.Slot)</pre></code></td></tr><tr><td>104</td><td><code><pre>        }</pre></code></td></tr><tr><td>105</td><td><code><pre></pre></code></td></tr><tr><td>106</td><td><code><pre>        return subs, err</pre></code></td></tr><tr><td>107</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LobbyGetSlotInfoString">func LobbyGetSlotInfoString</div><div class="info"><a href="#s_fn_LobbyGetSlotInfoString">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/classMaps.go</code>:</p></div><table class="listing">
<tr><td>115</td><td><code><pre>func LobbyGetSlotInfoString(lobbytype LobbyType, slot int) (team, class string, err *helpers.TPError) {</pre></code></td></tr><tr><td>116</td><td><code><pre>        classList := typeClassList[lobbytype]</pre></code></td></tr><tr><td>117</td><td><code><pre></pre></code></td></tr><tr><td>118</td><td><code><pre>        teamI, classI, err := LobbyGetSlotInfo(lobbytype, slot)</pre></code></td></tr><tr><td>119</td><td><code><pre>        if err == nil {</pre></code></td></tr><tr><td>120</td><td><code><pre>                team, class, err = teamList[teamI], classList[classI], nil</pre></code></td></tr><tr><td>121</td><td><code><pre>        }</pre></code></td></tr><tr><td>122</td><td><code><pre>        return</pre></code></td></tr><tr><td>123</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.Save">func Player.Save</div><div class="info"><a href="#s_fn_Player.Save">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>101</td><td><code><pre>func (player *Player) Save() error {</pre></code></td></tr><tr><td>102</td><td><code><pre>        var err error</pre></code></td></tr><tr><td>103</td><td><code><pre>        if db.DB.NewRecord(player) {</pre></code></td></tr><tr><td>104</td><td><code><pre>                err = db.DB.Create(player).Error</pre></code></td></tr><tr><td>105</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>106</td><td><code><pre>                err = db.DB.Save(player).Error</pre></code></td></tr><tr><td>107</td><td><code><pre>        }</pre></code></td></tr><tr><td>108</td><td><code><pre>        return err</pre></code></td></tr><tr><td>109</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.IsBannedWithTime">func Player.IsBannedWithTime</div><div class="info"><a href="#s_fn_Player.IsBannedWithTime">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>251</td><td><code><pre>func (player *Player) IsBannedWithTime(t PlayerBanType) (bool, time.Time) {</pre></code></td></tr><tr><td>252</td><td><code><pre>        ban := &amp;PlayerBan{}</pre></code></td></tr><tr><td>253</td><td><code><pre>        err := db.DB.Where(&#34;type = ? AND until &gt; now() AND player_id = ? AND active = TRUE&#34;, t, player.ID).</pre></code></td></tr><tr><td>254</td><td><code><pre>                Order(&#34;until desc&#34;).First(ban).Error</pre></code></td></tr><tr><td>255</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr><td>256</td><td><code><pre>                return false, time.Time{}</pre></code></td></tr><tr><td>257</td><td><code><pre>        }</pre></code></td></tr><tr><td>258</td><td><code><pre></pre></code></td></tr><tr><td>259</td><td><code><pre>        return true, ban.Until</pre></code></td></tr><tr><td>260</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.OnChange">func Lobby.OnChange</div><div class="info"><a href="#s_fn_Lobby.OnChange">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>754</td><td><code><pre>func (lobby *Lobby) OnChange(base bool) {</pre></code></td></tr><tr><td>755</td><td><code><pre>        switch lobby.State {</pre></code></td></tr><tr><td>756</td><td><code><pre>        case LobbyStateWaiting, LobbyStateInProgress, LobbyStateReadyingUp:</pre></code></td></tr><tr><td>757</td><td><code><pre>                BroadcastLobby(lobby)</pre></code></td></tr><tr><td>758</td><td><code><pre>                if base {</pre></code></td></tr><tr><td>759</td><td><code><pre>                        BroadcastLobbyList()</pre></code></td></tr><tr><td>760</td><td><code><pre>                }</pre></code></td></tr><tr><td>761</td><td><code><pre>        }</pre></code></td></tr><tr><td>762</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.HasGeneralRequirement">func Lobby.HasGeneralRequirement</div><div class="info"><a href="#s_fn_Lobby.HasGeneralRequirement">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>182</td><td><code><pre>func (lobby *Lobby) HasGeneralRequirement() bool {</pre></code></td></tr><tr><td>183</td><td><code><pre>        var count int</pre></code></td></tr><tr><td>184</td><td><code><pre>        db.DB.Table(&#34;requirements&#34;).Where(&#34;lobby_id = ? AND slot = -1&#34;, lobby.ID).Count(&amp;count)</pre></code></td></tr><tr><td>185</td><td><code><pre>        return count != 0</pre></code></td></tr><tr><td>186</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.IsEveryoneReady">func Lobby.IsEveryoneReady</div><div class="info"><a href="#s_fn_Lobby.IsEveryoneReady">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>583</td><td><code><pre>func (lobby *Lobby) IsEveryoneReady() bool {</pre></code></td></tr><tr><td>584</td><td><code><pre>        readyPlayers := 0</pre></code></td></tr><tr><td>585</td><td><code><pre>        db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND ready = ?&#34;, lobby.ID, true).Count(&amp;readyPlayers)</pre></code></td></tr><tr><td>586</td><td><code><pre></pre></code></td></tr><tr><td>587</td><td><code><pre>        return readyPlayers == 2*NumberOfClassesMap[lobby.Type]</pre></code></td></tr><tr><td>588</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.UnreadyAllPlayers">func Lobby.UnreadyAllPlayers</div><div class="info"><a href="#s_fn_Lobby.UnreadyAllPlayers">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>569</td><td><code><pre>func (lobby *Lobby) UnreadyAllPlayers() error {</pre></code></td></tr><tr><td>570</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ?&#34;, lobby.ID).UpdateColumn(&#34;ready&#34;, false).Error</pre></code></td></tr><tr><td>571</td><td><code><pre></pre></code></td></tr><tr><td>572</td><td><code><pre>        lobby.OnChange(false)</pre></code></td></tr><tr><td>573</td><td><code><pre>        return err</pre></code></td></tr><tr><td>574</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.FillSubstitute">func Lobby.FillSubstitute</div><div class="info"><a href="#s_fn_Lobby.FillSubstitute">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>370</td><td><code><pre>func (lobby *Lobby) FillSubstitute(slot int) error {</pre></code></td></tr><tr><td>371</td><td><code><pre>        err := db.DB.Table(&#34;substitutes&#34;).Where(&#34;lobby_id = ? AND slot = ? AND filled = ?&#34;, lobby.ID, slot, false).UpdateColumn(&#34;filled&#34;, true).Error</pre></code></td></tr><tr><td>372</td><td><code><pre>        BroadcastSubList()</pre></code></td></tr><tr><td>373</td><td><code><pre></pre></code></td></tr><tr><td>374</td><td><code><pre>        return err</pre></code></td></tr><tr><td>375</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.SlotNeedsSubstitute">func Lobby.SlotNeedsSubstitute</div><div class="info"><a href="#s_fn_Lobby.SlotNeedsSubstitute">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>362</td><td><code><pre>func (lobby *Lobby) SlotNeedsSubstitute(slot int) bool {</pre></code></td></tr><tr><td>363</td><td><code><pre>        var count int</pre></code></td></tr><tr><td>364</td><td><code><pre>        db.DB.Table(&#34;substitutes&#34;).Where(&#34;lobby_id = ? AND slot = ? AND filled = ? &#34;, lobby.ID, slot, false).Count(&amp;count)</pre></code></td></tr><tr><td>365</td><td><code><pre></pre></code></td></tr><tr><td>366</td><td><code><pre>        return count != 0</pre></code></td></tr><tr><td>367</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.GetPlayerIDBySlot">func Lobby.GetPlayerIDBySlot</div><div class="info"><a href="#s_fn_Lobby.GetPlayerIDBySlot">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>304</td><td><code><pre>func (lobby *Lobby) GetPlayerIDBySlot(slot int) (uint, error) {</pre></code></td></tr><tr><td>305</td><td><code><pre>        slotObj := &amp;LobbySlot{}</pre></code></td></tr><tr><td>306</td><td><code><pre></pre></code></td></tr><tr><td>307</td><td><code><pre>        err := db.DB.Where(&#34;lobby_id = ? AND slot = ?&#34;, lobby.ID, slot).First(slotObj).Error</pre></code></td></tr><tr><td>308</td><td><code><pre></pre></code></td></tr><tr><td>309</td><td><code><pre>        return uint(slotObj.PlayerID), err</pre></code></td></tr><tr><td>310</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.HasPlayer">func Lobby.HasPlayer</div><div class="info"><a href="#s_fn_Lobby.HasPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>354</td><td><code><pre>func (lobby *Lobby) HasPlayer(player *Player) bool {</pre></code></td></tr><tr><td>355</td><td><code><pre>        var count int</pre></code></td></tr><tr><td>356</td><td><code><pre>        db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, player.ID).Count(&amp;count)</pre></code></td></tr><tr><td>357</td><td><code><pre></pre></code></td></tr><tr><td>358</td><td><code><pre>        return count != 0</pre></code></td></tr><tr><td>359</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.GetSettings">func Player.GetSettings</div><div class="info"><a href="#s_fn_Player.GetSettings">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>244</td><td><code><pre>func (player *Player) GetSettings() ([]PlayerSetting, error) {</pre></code></td></tr><tr><td>245</td><td><code><pre>        var settings []PlayerSetting</pre></code></td></tr><tr><td>246</td><td><code><pre>        err := db.DB.Where(&#34;player_id = ?&#34;, player.ID).Find(&amp;settings).Error</pre></code></td></tr><tr><td>247</td><td><code><pre></pre></code></td></tr><tr><td>248</td><td><code><pre>        return settings, err</pre></code></td></tr><tr><td>249</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewBotMessage">func NewBotMessage</div><div class="info"><a href="#s_fn_NewBotMessage">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>79</td><td><code><pre>func NewBotMessage(message string, room int) *ChatMessage {</pre></code></td></tr><tr><td>80</td><td><code><pre>        m := &amp;ChatMessage{</pre></code></td></tr><tr><td>81</td><td><code><pre>                Timestamp: time.Now().Unix(),</pre></code></td></tr><tr><td>82</td><td><code><pre></pre></code></td></tr><tr><td>83</td><td><code><pre>                Player:  botSummary,</pre></code></td></tr><tr><td>84</td><td><code><pre>                Room:    room,</pre></code></td></tr><tr><td>85</td><td><code><pre>                Message: message,</pre></code></td></tr><tr><td>86</td><td><code><pre></pre></code></td></tr><tr><td>87</td><td><code><pre>                Bot: true,</pre></code></td></tr><tr><td>88</td><td><code><pre>        }</pre></code></td></tr><tr><td>89</td><td><code><pre></pre></code></td></tr><tr><td>90</td><td><code><pre>        m.Save()</pre></code></td></tr><tr><td>91</td><td><code><pre>        return m</pre></code></td></tr><tr><td>92</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetRoomMessages">func GetRoomMessages</div><div class="info"><a href="#s_fn_GetRoomMessages">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>100</td><td><code><pre>func GetRoomMessages(room int) ([]*ChatMessage, error) {</pre></code></td></tr><tr><td>101</td><td><code><pre>        var messages []*ChatMessage</pre></code></td></tr><tr><td>102</td><td><code><pre></pre></code></td></tr><tr><td>103</td><td><code><pre>        err := db.DB.Table(&#34;chat_messages&#34;).Where(&#34;room = ?&#34;, room).Order(&#34;created_at&#34;).Find(&amp;messages).Error</pre></code></td></tr><tr><td>104</td><td><code><pre></pre></code></td></tr><tr><td>105</td><td><code><pre>        return messages, err</pre></code></td></tr><tr><td>106</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetPlayerMessages">func GetPlayerMessages</div><div class="info"><a href="#s_fn_GetPlayerMessages">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>109</td><td><code><pre>func GetPlayerMessages(player *Player) ([]*ChatMessage, error) {</pre></code></td></tr><tr><td>110</td><td><code><pre>        var messages []*ChatMessage</pre></code></td></tr><tr><td>111</td><td><code><pre></pre></code></td></tr><tr><td>112</td><td><code><pre>        err := db.DB.Table(&#34;chat_messages&#34;).Where(&#34;player_id = ?&#34;, player.ID).Order(&#34;room, created_at&#34;).Find(&amp;messages).Error</pre></code></td></tr><tr><td>113</td><td><code><pre></pre></code></td></tr><tr><td>114</td><td><code><pre>        return messages, err</pre></code></td></tr><tr><td>115</td><td><code><pre></pre></code></td></tr><tr><td>116</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.GetSetting">func Player.GetSetting</div><div class="info"><a href="#s_fn_Player.GetSetting">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>237</td><td><code><pre>func (player *Player) GetSetting(key string) (PlayerSetting, error) {</pre></code></td></tr><tr><td>238</td><td><code><pre>        setting := PlayerSetting{}</pre></code></td></tr><tr><td>239</td><td><code><pre>        err := db.DB.Where(&#34;player_id = ? AND key = ?&#34;, player.ID, key).First(&amp;setting).Error</pre></code></td></tr><tr><td>240</td><td><code><pre></pre></code></td></tr><tr><td>241</td><td><code><pre>        return setting, err</pre></code></td></tr><tr><td>242</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.GetPlayerSlotObj">func Lobby.GetPlayerSlotObj</div><div class="info"><a href="#s_fn_Lobby.GetPlayerSlotObj">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>288</td><td><code><pre>func (lobby *Lobby) GetPlayerSlotObj(player *Player) (*LobbySlot, error) {</pre></code></td></tr><tr><td>289</td><td><code><pre>        slotObj := &amp;LobbySlot{}</pre></code></td></tr><tr><td>290</td><td><code><pre></pre></code></td></tr><tr><td>291</td><td><code><pre>        err := db.DB.Where(&#34;player_id = ? AND lobby_id = ?&#34;, player.ID, lobby.ID).First(slotObj).Error</pre></code></td></tr><tr><td>292</td><td><code><pre></pre></code></td></tr><tr><td>293</td><td><code><pre>        return slotObj, err</pre></code></td></tr><tr><td>294</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_BroadcastLobbyList">func BroadcastLobbyList</div><div class="info"><a href="#s_fn_BroadcastLobbyList">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>779</td><td><code><pre>func BroadcastLobbyList() {</pre></code></td></tr><tr><td>780</td><td><code><pre>        lobbies := []Lobby{}</pre></code></td></tr><tr><td>781</td><td><code><pre>        db.DB.Where(&#34;state = ?&#34;, LobbyStateWaiting).Order(&#34;id desc&#34;).Find(&amp;lobbies)</pre></code></td></tr><tr><td>782</td><td><code><pre>        broadcaster.SendMessageToRoom(</pre></code></td></tr><tr><td>783</td><td><code><pre>                fmt.Sprintf(&#34;%s_public&#34;, config.Constants.GlobalChatRoom),</pre></code></td></tr><tr><td>784</td><td><code><pre>                &#34;lobbyListData&#34;, DecorateLobbyListData(lobbies))</pre></code></td></tr><tr><td>785</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.setInGameStatus">func Lobby.setInGameStatus</div><div class="info"><a href="#s_fn_Lobby.setInGameStatus">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>693</td><td><code><pre>func (lobby *Lobby) setInGameStatus(player *Player, inGame bool) error {</pre></code></td></tr><tr><td>694</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;player_id = ? AND lobby_id = ?&#34;, player.ID, lobby.ID).UpdateColumn(&#34;in_game&#34;, inGame).Error</pre></code></td></tr><tr><td>695</td><td><code><pre></pre></code></td></tr><tr><td>696</td><td><code><pre>        lobby.OnChange(false)</pre></code></td></tr><tr><td>697</td><td><code><pre>        return err</pre></code></td></tr><tr><td>698</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.GetGeneralRequirement">func Lobby.GetGeneralRequirement</div><div class="info"><a href="#s_fn_Lobby.GetGeneralRequirement">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>159</td><td><code><pre>func (lobby *Lobby) GetGeneralRequirement() (*Requirement, error) {</pre></code></td></tr><tr><td>160</td><td><code><pre>        requirement := &amp;Requirement{}</pre></code></td></tr><tr><td>161</td><td><code><pre>        err := db.DB.Table(&#34;requirements&#34;).Where(&#34;lobby_id = ? AND slot = ?&#34;, lobby.ID, -1).First(requirement).Error</pre></code></td></tr><tr><td>162</td><td><code><pre></pre></code></td></tr><tr><td>163</td><td><code><pre>        return requirement, err</pre></code></td></tr><tr><td>164</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.GetSlotRequirement">func Lobby.GetSlotRequirement</div><div class="info"><a href="#s_fn_Lobby.GetSlotRequirement">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>167</td><td><code><pre>func (lobby *Lobby) GetSlotRequirement(slot int) (*Requirement, error) {</pre></code></td></tr><tr><td>168</td><td><code><pre>        req := &amp;Requirement{}</pre></code></td></tr><tr><td>169</td><td><code><pre>        err := db.DB.Table(&#34;requirements&#34;).Where(&#34;lobby_id = ? AND slot = ?&#34;, lobby.ID, slot).First(req).Error</pre></code></td></tr><tr><td>170</td><td><code><pre></pre></code></td></tr><tr><td>171</td><td><code><pre>        return req, err</pre></code></td></tr><tr><td>172</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.HasSlotRequirement">func Lobby.HasSlotRequirement</div><div class="info"><a href="#s_fn_Lobby.HasSlotRequirement">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>175</td><td><code><pre>func (lobby *Lobby) HasSlotRequirement(slot int) bool {</pre></code></td></tr><tr><td>176</td><td><code><pre>        var count int</pre></code></td></tr><tr><td>177</td><td><code><pre>        db.DB.Table(&#34;requirements&#34;).Where(&#34;lobby_id = ? AND slot = ?&#34;, lobby.ID, slot).Count(&amp;count)</pre></code></td></tr><tr><td>178</td><td><code><pre>        return count != 0</pre></code></td></tr><tr><td>179</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.BanUntil">func Player.BanUntil</div><div class="info"><a href="#s_fn_Player.BanUntil">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>267</td><td><code><pre>func (player *Player) BanUntil(tim time.Time, t PlayerBanType, reason string) error {</pre></code></td></tr><tr><td>268</td><td><code><pre>        ban := PlayerBan{</pre></code></td></tr><tr><td>269</td><td><code><pre>                PlayerID: player.ID,</pre></code></td></tr><tr><td>270</td><td><code><pre>                Type:     t,</pre></code></td></tr><tr><td>271</td><td><code><pre>                Until:    tim,</pre></code></td></tr><tr><td>272</td><td><code><pre>                Reason:   reason,</pre></code></td></tr><tr><td>273</td><td><code><pre>        }</pre></code></td></tr><tr><td>274</td><td><code><pre></pre></code></td></tr><tr><td>275</td><td><code><pre>        return db.DB.Create(&amp;ban).Error</pre></code></td></tr><tr><td>276</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewChatMessage">func NewChatMessage</div><div class="info"><a href="#s_fn_NewChatMessage">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>43</td><td><code><pre>func NewChatMessage(message string, room int, player *Player) *ChatMessage {</pre></code></td></tr><tr><td>44</td><td><code><pre>        record := &amp;ChatMessage{</pre></code></td></tr><tr><td>45</td><td><code><pre>                Timestamp: time.Now().Unix(),</pre></code></td></tr><tr><td>46</td><td><code><pre></pre></code></td></tr><tr><td>47</td><td><code><pre>                PlayerID: player.ID,</pre></code></td></tr><tr><td>48</td><td><code><pre>                Player:   DecoratePlayerSummary(player),</pre></code></td></tr><tr><td>49</td><td><code><pre></pre></code></td></tr><tr><td>50</td><td><code><pre>                Room:    room,</pre></code></td></tr><tr><td>51</td><td><code><pre>                Message: message,</pre></code></td></tr><tr><td>52</td><td><code><pre>        }</pre></code></td></tr><tr><td>53</td><td><code><pre></pre></code></td></tr><tr><td>54</td><td><code><pre>        return record</pre></code></td></tr><tr><td>55</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_SendNotification">func SendNotification</div><div class="info"><a href="#s_fn_SendNotification">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>94</td><td><code><pre>func SendNotification(message string, room int) {</pre></code></td></tr><tr><td>95</td><td><code><pre>        pub := fmt.Sprintf(&#34;%d_public&#34;, room)</pre></code></td></tr><tr><td>96</td><td><code><pre>        broadcaster.SendMessageToRoom(pub, &#34;chatReceive&#34;, NewBotMessage(message, room))</pre></code></td></tr><tr><td>97</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewLobby">func NewLobby</div><div class="info"><a href="#s_fn_NewLobby">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>261</td><td><code><pre>func NewLobby(mapName string, lobbyType LobbyType, league string, serverInfo ServerRecord, whitelist string, mumble bool, whitelistGroup, password string) *Lobby {</pre></code></td></tr><tr><td>262</td><td><code><pre>        lobby := &amp;Lobby{</pre></code></td></tr><tr><td>263</td><td><code><pre>                Mode:            getGamemode(mapName, lobbyType),</pre></code></td></tr><tr><td>264</td><td><code><pre>                Type:            lobbyType,</pre></code></td></tr><tr><td>265</td><td><code><pre>                State:           LobbyStateInitializing,</pre></code></td></tr><tr><td>266</td><td><code><pre>                League:          league,</pre></code></td></tr><tr><td>267</td><td><code><pre>                MapName:         mapName,</pre></code></td></tr><tr><td>268</td><td><code><pre>                Whitelist:       whitelist, // that&#39;s a strange line</pre></code></td></tr><tr><td>269</td><td><code><pre>                Mumble:          mumble,</pre></code></td></tr><tr><td>270</td><td><code><pre>                ServerInfo:      serverInfo,</pre></code></td></tr><tr><td>271</td><td><code><pre>                PlayerWhitelist: whitelistGroup,</pre></code></td></tr><tr><td>272</td><td><code><pre>                SlotPassword:    password,</pre></code></td></tr><tr><td>273</td><td><code><pre>        }</pre></code></td></tr><tr><td>274</td><td><code><pre></pre></code></td></tr><tr><td>275</td><td><code><pre>        // Must specify CreatedBy manually if the lobby is created by a player</pre></code></td></tr><tr><td>276</td><td><code><pre></pre></code></td></tr><tr><td>277</td><td><code><pre>        return lobby</pre></code></td></tr><tr><td>278</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.GetPlayerSlot">func Lobby.GetPlayerSlot</div><div class="info"><a href="#s_fn_Lobby.GetPlayerSlot">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>297</td><td><code><pre>func (lobby *Lobby) GetPlayerSlot(player *Player) (int, error) {</pre></code></td></tr><tr><td>298</td><td><code><pre>        slotObj, err := lobby.GetPlayerSlotObj(player)</pre></code></td></tr><tr><td>299</td><td><code><pre></pre></code></td></tr><tr><td>300</td><td><code><pre>        return slotObj.Slot, err</pre></code></td></tr><tr><td>301</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.BanPlayer">func Lobby.BanPlayer</div><div class="info"><a href="#s_fn_Lobby.BanPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>498</td><td><code><pre>func (lobby *Lobby) BanPlayer(player *Player) {</pre></code></td></tr><tr><td>499</td><td><code><pre>        DisallowPlayer(lobby.ID, player.SteamID)</pre></code></td></tr><tr><td>500</td><td><code><pre>        db.DB.Model(lobby).Association(&#34;BannedPlayers&#34;).Append(player)</pre></code></td></tr><tr><td>501</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LogCustomAdminAction">func LogCustomAdminAction</div><div class="info"><a href="#s_fn_LogCustomAdminAction">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/admin_log.go</code>:</p></div><table class="listing">
<tr><td>21</td><td><code><pre>func LogCustomAdminAction(playerid uint, reltext string, relid uint) error {</pre></code></td></tr><tr><td>22</td><td><code><pre>        entry := AdminLogEntry{</pre></code></td></tr><tr><td>23</td><td><code><pre>                PlayerID: playerid,</pre></code></td></tr><tr><td>24</td><td><code><pre>                RelID:    relid,</pre></code></td></tr><tr><td>25</td><td><code><pre>                RelText:  reltext,</pre></code></td></tr><tr><td>26</td><td><code><pre>        }</pre></code></td></tr><tr><td>27</td><td><code><pre></pre></code></td></tr><tr><td>28</td><td><code><pre>        return database.DB.Create(&amp;entry).Error</pre></code></td></tr><tr><td>29</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_BroadcastLobby">func BroadcastLobby</div><div class="info"><a href="#s_fn_BroadcastLobby">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>765</td><td><code><pre>func BroadcastLobby(lobby *Lobby) {</pre></code></td></tr><tr><td>766</td><td><code><pre>        //db.DB.Preload(&#34;Spectators&#34;).First(&amp;lobby, lobby.ID)</pre></code></td></tr><tr><td>767</td><td><code><pre>        room := strconv.FormatUint(uint64(lobby.ID), 10)</pre></code></td></tr><tr><td>768</td><td><code><pre></pre></code></td></tr><tr><td>769</td><td><code><pre>        broadcaster.SendMessageToRoom(fmt.Sprintf(&#34;%s_public&#34;, room), &#34;lobbyData&#34;, DecorateLobbyData(lobby, true))</pre></code></td></tr><tr><td>770</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.IsBanned">func Player.IsBanned</div><div class="info"><a href="#s_fn_Player.IsBanned">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>262</td><td><code><pre>func (player *Player) IsBanned(t PlayerBanType) bool {</pre></code></td></tr><tr><td>263</td><td><code><pre>        res, _ := player.IsBannedWithTime(t)</pre></code></td></tr><tr><td>264</td><td><code><pre>        return res</pre></code></td></tr><tr><td>265</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_PlayerStats.IncreaseSubCount">func PlayerStats.IncreaseSubCount</div><div class="info"><a href="#s_fn_PlayerStats.IncreaseSubCount">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/playerStats.go</code>:</p></div><table class="listing">
<tr><td>50</td><td><code><pre>func (ps *PlayerStats) IncreaseSubCount() {</pre></code></td></tr><tr><td>51</td><td><code><pre>        ps.Substitutes++</pre></code></td></tr><tr><td>52</td><td><code><pre>        database.DB.Save(ps)</pre></code></td></tr><tr><td>53</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_decoratePlayerTags">func decoratePlayerTags</div><div class="info"><a href="#s_fn_decoratePlayerTags">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player_decorators.go</code>:</p></div><table class="listing">
<tr><td>45</td><td><code><pre>func decoratePlayerTags(p *Player) []string {</pre></code></td></tr><tr><td>46</td><td><code><pre>        tags := []string{helpers.RoleNames[p.Role]}</pre></code></td></tr><tr><td>47</td><td><code><pre>        return tags</pre></code></td></tr><tr><td>48</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_PlayerStats.TotalLobbies">func PlayerStats.TotalLobbies</div><div class="info"><a href="#s_fn_PlayerStats.TotalLobbies">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/playerStats.go</code>:</p></div><table class="listing">
<tr><td>30</td><td><code><pre>func (ps *PlayerStats) TotalLobbies() int {</pre></code></td></tr><tr><td>31</td><td><code><pre>        return ps.PlayedSixesCount + ps.PlayedHighlanderCount + ps.PlayedFoursCount + ps.PlayedUltiduoCount + ps.PlayedBballCount</pre></code></td></tr><tr><td>32</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_BroadcastSubList">func BroadcastSubList</div><div class="info"><a href="#s_fn_BroadcastSubList">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/substitute.go</code>:</p></div><table class="listing">
<tr><td>91</td><td><code><pre>func BroadcastSubList() {</pre></code></td></tr><tr><td>92</td><td><code><pre>        broadcaster.SendMessageToRoom(&#34;0_public&#34;, &#34;subListData&#34;, GetAllSubs())</pre></code></td></tr><tr><td>93</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.HasRequirements">func Lobby.HasRequirements</div><div class="info"><a href="#s_fn_Lobby.HasRequirements">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>189</td><td><code><pre>func (lobby *Lobby) HasRequirements(slot int) bool {</pre></code></td></tr><tr><td>190</td><td><code><pre>        return lobby.HasSlotRequirement(slot) || lobby.HasGeneralRequirement()</pre></code></td></tr><tr><td>191</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecorateLobbyClosed">func DecorateLobbyClosed</div><div class="info"><a href="#s_fn_DecorateLobbyClosed">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>241</td><td><code><pre>func DecorateLobbyClosed(lobby *Lobby) LobbyEvent {</pre></code></td></tr><tr><td>242</td><td><code><pre>        return LobbyEvent{lobby.ID}</pre></code></td></tr><tr><td>243</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecorateLobbyLeave">func DecorateLobbyLeave</div><div class="info"><a href="#s_fn_DecorateLobbyLeave">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>237</td><td><code><pre>func DecorateLobbyLeave(lobby *Lobby) LobbyEvent {</pre></code></td></tr><tr><td>238</td><td><code><pre>        return LobbyEvent{lobby.ID}</pre></code></td></tr><tr><td>239</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.Unban">func Player.Unban</div><div class="info"><a href="#s_fn_Player.Unban">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>278</td><td><code><pre>func (player *Player) Unban(t PlayerBanType) error {</pre></code></td></tr><tr><td>279</td><td><code><pre>        return db.DB.Model(&amp;PlayerBan{}).Where(&#34;player_id = ? AND type = ? AND active = TRUE&#34;, player.ID, t).</pre></code></td></tr><tr><td>280</td><td><code><pre>                Update(&#34;active&#34;, &#34;FALSE&#34;).Error</pre></code></td></tr><tr><td>281</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Requirement.Save">func Requirement.Save</div><div class="info"><a href="#s_fn_Requirement.Save">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>156</td><td><code><pre>func (r *Requirement) Save() { db.DB.Save(r) }</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.SetInGame">func Lobby.SetInGame</div><div class="info"><a href="#s_fn_Lobby.SetInGame">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>701</td><td><code><pre>func (lobby *Lobby) SetInGame(player *Player) error {</pre></code></td></tr><tr><td>702</td><td><code><pre>        return lobby.setInGameStatus(player, true)</pre></code></td></tr><tr><td>703</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.SetNotInGame">func Lobby.SetNotInGame</div><div class="info"><a href="#s_fn_Lobby.SetNotInGame">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>706</td><td><code><pre>func (lobby *Lobby) SetNotInGame(player *Player) error {</pre></code></td></tr><tr><td>707</td><td><code><pre>        return lobby.setInGameStatus(player, false)</pre></code></td></tr><tr><td>708</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Substitute.Save">func Substitute.Save</div><div class="info"><a href="#s_fn_Substitute.Save">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/substitute.go</code>:</p></div><table class="listing">
<tr><td>60</td><td><code><pre>func (s *Substitute) Save() {</pre></code></td></tr><tr><td>61</td><td><code><pre>        db.DB.Save(s)</pre></code></td></tr><tr><td>62</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LogAdminAction">func LogAdminAction</div><div class="info"><a href="#s_fn_LogAdminAction">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/admin_log.go</code>:</p></div><table class="listing">
<tr><td>31</td><td><code><pre>func LogAdminAction(playerid uint, permission authority.AuthAction, relid uint) error {</pre></code></td></tr><tr><td>32</td><td><code><pre>        return LogCustomAdminAction(playerid, helpers.ActionNames[permission], relid)</pre></code></td></tr><tr><td>33</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_ChatMessage.Save">func ChatMessage.Save</div><div class="info"><a href="#s_fn_ChatMessage.Save">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>70</td><td><code><pre>func (m *ChatMessage) Save() { db.DB.Save(m) }</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.RealAfterSave">func Lobby.RealAfterSave</div><div class="info"><a href="#s_fn_Lobby.RealAfterSave">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>749</td><td><code><pre>func (lobby *Lobby) RealAfterSave() {</pre></code></td></tr><tr><td>750</td><td><code><pre>        lobby.OnChange(true)</pre></code></td></tr><tr><td>751</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecorateLobbyData">func DecorateLobbyData</div><div class="info"><a href="#s_fn_DecorateLobbyData">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>118</td><td><code><pre>func DecorateLobbyData(lobby *Lobby, includeDetails bool) LobbyData {</pre></code></td></tr><tr><td>119</td><td><code><pre>        lobbyData := LobbyData{</pre></code></td></tr><tr><td>120</td><td><code><pre>                ID:      lobby.ID,</pre></code></td></tr><tr><td>121</td><td><code><pre>                Mode:    lobby.Mode,</pre></code></td></tr><tr><td>122</td><td><code><pre>                Type:    formatMap[lobby.Type],</pre></code></td></tr><tr><td>123</td><td><code><pre>                Players: lobby.GetPlayerNumber(),</pre></code></td></tr><tr><td>124</td><td><code><pre>                Map:     lobby.MapName,</pre></code></td></tr><tr><td>125</td><td><code><pre>                League:  lobby.League,</pre></code></td></tr><tr><td>126</td><td><code><pre>                Mumble:  lobby.Mumble,</pre></code></td></tr><tr><td>127</td><td><code><pre></pre></code></td></tr><tr><td>128</td><td><code><pre>                PlayerWhitelist: lobby.PlayerWhitelist != &#34;&#34;,</pre></code></td></tr><tr><td>129</td><td><code><pre>                Password:        lobby.SlotPassword != &#34;&#34;,</pre></code></td></tr><tr><td>130</td><td><code><pre>        }</pre></code></td></tr><tr><td>131</td><td><code><pre></pre></code></td></tr><tr><td>132</td><td><code><pre>        lobbyData.Region.Name = lobby.RegionName</pre></code></td></tr><tr><td>133</td><td><code><pre>        lobbyData.Region.Code = lobby.RegionCode</pre></code></td></tr><tr><td>134</td><td><code><pre></pre></code></td></tr><tr><td>135</td><td><code><pre>        var classList = typeClassList[lobby.Type]</pre></code></td></tr><tr><td>136</td><td><code><pre></pre></code></td></tr><tr><td>137</td><td><code><pre>        classes := make([]ClassDetails, len(classList))</pre></code></td></tr><tr><td>138</td><td><code><pre>        lobbyData.MaxPlayers = NumberOfClassesMap[lobby.Type] * 2</pre></code></td></tr><tr><td>139</td><td><code><pre></pre></code></td></tr><tr><td>140</td><td><code><pre>        for slot, className := range classList {</pre></code></td></tr><tr><td>141</td><td><code><pre>                class := ClassDetails{</pre></code></td></tr><tr><td>142</td><td><code><pre>                        Red:   decorateSlotDetails(lobby, slot, includeDetails),</pre></code></td></tr><tr><td>143</td><td><code><pre>                        Blu:   decorateSlotDetails(lobby, slot+NumberOfClassesMap[lobby.Type], includeDetails),</pre></code></td></tr><tr><td>144</td><td><code><pre>                        Class: className,</pre></code></td></tr><tr><td>145</td><td><code><pre>                }</pre></code></td></tr><tr><td>146</td><td><code><pre></pre></code></td></tr><tr><td>147</td><td><code><pre>                classes[slot] = class</pre></code></td></tr><tr><td>148</td><td><code><pre>        }</pre></code></td></tr><tr><td>149</td><td><code><pre></pre></code></td></tr><tr><td>150</td><td><code><pre>        lobbyData.Classes = classes</pre></code></td></tr><tr><td>151</td><td><code><pre>        lobbyData.WhitelistID = lobby.Whitelist</pre></code></td></tr><tr><td>152</td><td><code><pre></pre></code></td></tr><tr><td>153</td><td><code><pre>        if !includeDetails {</pre></code></td></tr><tr class="miss"><td>154</td><td><code><pre>                return lobbyData</pre></code></td></tr><tr><td>155</td><td><code><pre>        }</pre></code></td></tr><tr><td>156</td><td><code><pre></pre></code></td></tr><tr><td>157</td><td><code><pre>        var leader Player</pre></code></td></tr><tr><td>158</td><td><code><pre>        db.DB.Where(&#34;steam_id = ?&#34;, lobby.CreatedBySteamID).First(&amp;leader)</pre></code></td></tr><tr><td>159</td><td><code><pre></pre></code></td></tr><tr><td>160</td><td><code><pre>        lobbyData.Leader = DecoratePlayerSummary(&amp;leader)</pre></code></td></tr><tr><td>161</td><td><code><pre>        lobbyData.CreatedAt = lobby.CreatedAt.Unix()</pre></code></td></tr><tr><td>162</td><td><code><pre>        lobbyData.State = int(lobby.State)</pre></code></td></tr><tr><td>163</td><td><code><pre></pre></code></td></tr><tr><td>164</td><td><code><pre>        var specIDs []uint</pre></code></td></tr><tr><td>165</td><td><code><pre>        db.DB.Table(&#34;spectators_players_lobbies&#34;).Where(&#34;lobby_id = ?&#34;, lobby.ID).Pluck(&#34;player_id&#34;, &amp;specIDs)</pre></code></td></tr><tr><td>166</td><td><code><pre></pre></code></td></tr><tr><td>167</td><td><code><pre>        spectators := make([]SpecDetails, len(specIDs))</pre></code></td></tr><tr><td>168</td><td><code><pre></pre></code></td></tr><tr><td>169</td><td><code><pre>        for i, spectatorID := range specIDs {</pre></code></td></tr><tr><td>170</td><td><code><pre>                specPlayer := &amp;Player{}</pre></code></td></tr><tr><td>171</td><td><code><pre>                db.DB.First(specPlayer, spectatorID)</pre></code></td></tr><tr><td>172</td><td><code><pre></pre></code></td></tr><tr><td>173</td><td><code><pre>                specJs := SpecDetails{</pre></code></td></tr><tr><td>174</td><td><code><pre>                        Name:    specPlayer.Alias(),</pre></code></td></tr><tr><td>175</td><td><code><pre>                        SteamID: specPlayer.SteamID,</pre></code></td></tr><tr><td>176</td><td><code><pre>                }</pre></code></td></tr><tr><td>177</td><td><code><pre></pre></code></td></tr><tr><td>178</td><td><code><pre>                spectators[i] = specJs</pre></code></td></tr><tr><td>179</td><td><code><pre>        }</pre></code></td></tr><tr><td>180</td><td><code><pre></pre></code></td></tr><tr><td>181</td><td><code><pre>        lobbyData.Spectators = spectators</pre></code></td></tr><tr><td>182</td><td><code><pre></pre></code></td></tr><tr><td>183</td><td><code><pre>        return lobbyData</pre></code></td></tr><tr><td>184</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewSub">func NewSub</div><div class="info"><a href="#s_fn_NewSub">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/substitute.go</code>:</p></div><table class="listing">
<tr><td>29</td><td><code><pre>func NewSub(lobbyid, playerid uint) (*Substitute, error) {</pre></code></td></tr><tr><td>30</td><td><code><pre>        player := &amp;Player{}</pre></code></td></tr><tr><td>31</td><td><code><pre>        err := db.DB.Preload(&#34;Stats&#34;).First(player, playerid).Error</pre></code></td></tr><tr><td>32</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>33</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>34</td><td><code><pre>        }</pre></code></td></tr><tr><td>35</td><td><code><pre></pre></code></td></tr><tr><td>36</td><td><code><pre>        lobby := &amp;Lobby{}</pre></code></td></tr><tr><td>37</td><td><code><pre>        db.DB.First(lobby, lobbyid)</pre></code></td></tr><tr><td>38</td><td><code><pre>        //helpers.Logger.Debug(&#34;#%d: Reported player %s&lt;%s&gt;&#34;,</pre></code></td></tr><tr><td>39</td><td><code><pre>        //        lobbyid, player.Name, player.SteamId)</pre></code></td></tr><tr><td>40</td><td><code><pre>        lob, _ := GetLobbyByID(lobbyid)</pre></code></td></tr><tr><td>41</td><td><code><pre>        slot := &amp;LobbySlot{}</pre></code></td></tr><tr><td>42</td><td><code><pre></pre></code></td></tr><tr><td>43</td><td><code><pre>        db.DB.Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobbyid, player.ID).First(slot)</pre></code></td></tr><tr><td>44</td><td><code><pre></pre></code></td></tr><tr><td>45</td><td><code><pre>        sub := &amp;Substitute{}</pre></code></td></tr><tr><td>46</td><td><code><pre></pre></code></td></tr><tr><td>47</td><td><code><pre>        sub.LobbyID = lob.ID</pre></code></td></tr><tr><td>48</td><td><code><pre>        sub.Format = formatMap[lob.Type]</pre></code></td></tr><tr><td>49</td><td><code><pre>        sub.PlayerID = player.ID</pre></code></td></tr><tr><td>50</td><td><code><pre>        sub.MapName = lob.MapName</pre></code></td></tr><tr><td>51</td><td><code><pre>        sub.Region = lob.RegionName</pre></code></td></tr><tr><td>52</td><td><code><pre>        sub.Mumble = lob.Mumble</pre></code></td></tr><tr><td>53</td><td><code><pre></pre></code></td></tr><tr><td>54</td><td><code><pre>        sub.Slot = slot.Slot</pre></code></td></tr><tr><td>55</td><td><code><pre>        //sub.Team, sub.Class, _ = LobbyGetSlotInfoString(lobby.Type, slot.Slot)</pre></code></td></tr><tr><td>56</td><td><code><pre>        player.Stats.IncreaseSubCount()</pre></code></td></tr><tr><td>57</td><td><code><pre>        return sub, nil</pre></code></td></tr><tr><td>58</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.RemoveUnreadyPlayers">func Lobby.RemoveUnreadyPlayers</div><div class="info"><a href="#s_fn_Lobby.RemoveUnreadyPlayers">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>525</td><td><code><pre>func (lobby *Lobby) RemoveUnreadyPlayers(spec bool) error {</pre></code></td></tr><tr><td>526</td><td><code><pre>        playerids := []uint{}</pre></code></td></tr><tr><td>527</td><td><code><pre></pre></code></td></tr><tr><td>528</td><td><code><pre>        if spec {</pre></code></td></tr><tr><td>529</td><td><code><pre>                err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND ready = ?&#34;, lobby.ID, false).Pluck(&#34;player_id&#34;, &amp;playerids).Error</pre></code></td></tr><tr><td>530</td><td><code><pre>                if err != nil {</pre></code></td></tr><tr class="miss"><td>531</td><td><code><pre>                        return err</pre></code></td></tr><tr><td>532</td><td><code><pre>                }</pre></code></td></tr><tr><td>533</td><td><code><pre>        }</pre></code></td></tr><tr><td>534</td><td><code><pre></pre></code></td></tr><tr><td>535</td><td><code><pre>        err := db.DB.Where(&#34;lobby_id = ? AND ready = ?&#34;, lobby.ID, false).Delete(&amp;LobbySlot{}).Error</pre></code></td></tr><tr><td>536</td><td><code><pre>        if spec {</pre></code></td></tr><tr><td>537</td><td><code><pre>                for _, id := range playerids {</pre></code></td></tr><tr><td>538</td><td><code><pre>                        player := &amp;Player{}</pre></code></td></tr><tr><td>539</td><td><code><pre>                        db.DB.First(player, id)</pre></code></td></tr><tr><td>540</td><td><code><pre>                        lobby.AddSpectator(player)</pre></code></td></tr><tr><td>541</td><td><code><pre>                }</pre></code></td></tr><tr><td>542</td><td><code><pre>        }</pre></code></td></tr><tr><td>543</td><td><code><pre>        lobby.OnChange(true)</pre></code></td></tr><tr><td>544</td><td><code><pre>        return err</pre></code></td></tr><tr><td>545</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.AddPlayer">func Lobby.AddPlayer</div><div class="info"><a href="#s_fn_Lobby.AddPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>379</td><td><code><pre>func (lobby *Lobby) AddPlayer(player *Player, slot int, password string) *helpers.TPError {</pre></code></td></tr><tr><td>380</td><td><code><pre>        /* Possible errors while joining</pre></code></td></tr><tr><td>381</td><td><code><pre>         * Slot has been filled</pre></code></td></tr><tr><td>382</td><td><code><pre>         * Player has already joined a lobby</pre></code></td></tr><tr><td>383</td><td><code><pre>         * anything else?</pre></code></td></tr><tr><td>384</td><td><code><pre>         */</pre></code></td></tr><tr><td>385</td><td><code><pre></pre></code></td></tr><tr><td>386</td><td><code><pre>        if lobby.SlotPassword != &#34;&#34; &amp;&amp; lobby.SlotPassword != password {</pre></code></td></tr><tr class="miss"><td>387</td><td><code><pre>                if lobby.PlayerWhitelist == &#34;&#34; &amp;&amp; password != &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>388</td><td><code><pre>                        return InvalidPasswordErr</pre></code></td></tr><tr><td>389</td><td><code><pre>                }</pre></code></td></tr><tr><td>390</td><td><code><pre>        }</pre></code></td></tr><tr><td>391</td><td><code><pre></pre></code></td></tr><tr><td>392</td><td><code><pre>        if player.ID == 0 {</pre></code></td></tr><tr class="miss"><td>393</td><td><code><pre>                return helpers.NewTPError(&#34;Player not in the database&#34;, -1)</pre></code></td></tr><tr><td>394</td><td><code><pre>        }</pre></code></td></tr><tr><td>395</td><td><code><pre></pre></code></td></tr><tr><td>396</td><td><code><pre>        num := 0</pre></code></td></tr><tr><td>397</td><td><code><pre></pre></code></td></tr><tr><td>398</td><td><code><pre>        // It should really be possible to do this query using relations</pre></code></td></tr><tr><td>399</td><td><code><pre>        if err := db.DB.Table(&#34;banned_players_lobbies&#34;).</pre></code></td></tr><tr><td>400</td><td><code><pre>                Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, player.ID).</pre></code></td></tr><tr><td>401</td><td><code><pre>                Count(&amp;num).Error; num &gt; 0 || err != nil {</pre></code></td></tr><tr><td>402</td><td><code><pre>                //helpers.Logger.Debug(fmt.Sprint(err))</pre></code></td></tr><tr><td>403</td><td><code><pre>                return LobbyBanErr</pre></code></td></tr><tr><td>404</td><td><code><pre>        }</pre></code></td></tr><tr><td>405</td><td><code><pre></pre></code></td></tr><tr><td>406</td><td><code><pre>        if slot &gt;= 2*NumberOfClassesMap[lobby.Type] || slot &lt; 0 {</pre></code></td></tr><tr><td>407</td><td><code><pre>                return BadSlotErr</pre></code></td></tr><tr><td>408</td><td><code><pre>        }</pre></code></td></tr><tr><td>409</td><td><code><pre></pre></code></td></tr><tr><td>410</td><td><code><pre>        var slotChange bool</pre></code></td></tr><tr><td>411</td><td><code><pre>        if currLobbyID, err := player.GetLobbyID(false); err == nil {</pre></code></td></tr><tr><td>412</td><td><code><pre>                if currLobbyID != lobby.ID {</pre></code></td></tr><tr><td>413</td><td><code><pre>                        // if the player is in a different lobby, remove them from that lobby</pre></code></td></tr><tr><td>414</td><td><code><pre>                        // plus substitute them</pre></code></td></tr><tr><td>415</td><td><code><pre>                        curLobby, _ := GetLobbyByID(currLobbyID)</pre></code></td></tr><tr><td>416</td><td><code><pre></pre></code></td></tr><tr><td>417</td><td><code><pre>                        if curLobby.State == LobbyStateInProgress {</pre></code></td></tr><tr><td>418</td><td><code><pre>                                sub, _ := NewSub(curLobby.ID, player.ID)</pre></code></td></tr><tr><td>419</td><td><code><pre>                                sub.Save()</pre></code></td></tr><tr><td>420</td><td><code><pre>                                BroadcastSubList()</pre></code></td></tr><tr><td>421</td><td><code><pre>                        }</pre></code></td></tr><tr><td>422</td><td><code><pre></pre></code></td></tr><tr><td>423</td><td><code><pre>                        curLobby.RemovePlayer(player)</pre></code></td></tr><tr><td>424</td><td><code><pre></pre></code></td></tr><tr><td>425</td><td><code><pre>                } else {</pre></code></td></tr><tr><td>426</td><td><code><pre>                        // assign the player to a new slot</pre></code></td></tr><tr><td>427</td><td><code><pre>                        // try to remove them from the old slot (in case they are switching slots)</pre></code></td></tr><tr><td>428</td><td><code><pre>                        if lobby.SlotNeedsSubstitute(slot) {</pre></code></td></tr><tr class="miss"><td>429</td><td><code><pre>                                return NeedsSubErr</pre></code></td></tr><tr><td>430</td><td><code><pre>                        }</pre></code></td></tr><tr><td>431</td><td><code><pre>                        db.DB.Where(&#34;player_id = ? AND lobby_id = ?&#34;, player.ID, lobby.ID).Delete(&amp;LobbySlot{})</pre></code></td></tr><tr><td>432</td><td><code><pre>                        slotChange = true</pre></code></td></tr><tr><td>433</td><td><code><pre>                }</pre></code></td></tr><tr><td>434</td><td><code><pre>        }</pre></code></td></tr><tr><td>435</td><td><code><pre></pre></code></td></tr><tr><td>436</td><td><code><pre>        if !slotChange {</pre></code></td></tr><tr><td>437</td><td><code><pre>                url := fmt.Sprintf(`http://steamcommunity.com/groups/%s/memberslistxml/?xml=1`,</pre></code></td></tr><tr><td>438</td><td><code><pre>                        lobby.PlayerWhitelist)</pre></code></td></tr><tr><td>439</td><td><code><pre></pre></code></td></tr><tr><td>440</td><td><code><pre>                if lobby.PlayerWhitelist != &#34;&#34; &amp;&amp; !helpers.IsWhitelisted(player.SteamID, url) {</pre></code></td></tr><tr class="miss"><td>441</td><td><code><pre>                        return NotWhitelistedErr</pre></code></td></tr><tr><td>442</td><td><code><pre>                }</pre></code></td></tr><tr><td>443</td><td><code><pre></pre></code></td></tr><tr><td>444</td><td><code><pre>                if lobby.HasRequirements(slot) {</pre></code></td></tr><tr><td>445</td><td><code><pre>                        if ok, err := lobby.FitsRequirements(player, slot); !ok {</pre></code></td></tr><tr><td>446</td><td><code><pre>                                return err</pre></code></td></tr><tr><td>447</td><td><code><pre>                        }</pre></code></td></tr><tr><td>448</td><td><code><pre>                }</pre></code></td></tr><tr><td>449</td><td><code><pre>        }</pre></code></td></tr><tr><td>450</td><td><code><pre></pre></code></td></tr><tr><td>451</td><td><code><pre>        // Check if player is a substitute</pre></code></td></tr><tr><td>452</td><td><code><pre>        if lobby.SlotNeedsSubstitute(slot) {</pre></code></td></tr><tr><td>453</td><td><code><pre>                //kicks player if they&#39;re in-game, resets their !rep count.</pre></code></td></tr><tr><td>454</td><td><code><pre>                DisallowPlayer(lobby.ID, player.SteamID)</pre></code></td></tr><tr><td>455</td><td><code><pre>                db.DB.Where(&#34;lobby_id = ? AND slot = ?&#34;, lobby.ID, slot).Delete(&amp;LobbySlot{}) //remove the slot</pre></code></td></tr><tr><td>456</td><td><code><pre>                //substitute is now filled</pre></code></td></tr><tr><td>457</td><td><code><pre>                lobby.FillSubstitute(slot)</pre></code></td></tr><tr><td>458</td><td><code><pre>                //notify players in game server of subtitute</pre></code></td></tr><tr><td>459</td><td><code><pre>                class, team, _ := LobbyGetSlotInfoString(lobby.Type, slot)</pre></code></td></tr><tr><td>460</td><td><code><pre>                Say(lobby.ID, fmt.Sprintf(&#34;Substitute found for %s %s: %s (%s)&#34;, team, class, player.Name, player.SteamID))</pre></code></td></tr><tr><td>461</td><td><code><pre>                //allow player in mumble</pre></code></td></tr><tr><td>462</td><td><code><pre>                FumbleLobbyPlayerJoinedSub(lobby, player, slot)</pre></code></td></tr><tr><td>463</td><td><code><pre>        } else if _, err := lobby.GetPlayerIDBySlot(slot); err == nil {</pre></code></td></tr><tr><td>464</td><td><code><pre>                return FilledErr</pre></code></td></tr><tr><td>465</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>466</td><td><code><pre>                FumbleLobbyPlayerJoined(lobby, player, slot) // no errors, al</pre></code></td></tr><tr><td>467</td><td><code><pre>        }</pre></code></td></tr><tr><td>468</td><td><code><pre></pre></code></td></tr><tr><td>469</td><td><code><pre>        //try to remove them from spectators</pre></code></td></tr><tr><td>470</td><td><code><pre>        lobby.RemoveSpectator(player, false)</pre></code></td></tr><tr><td>471</td><td><code><pre></pre></code></td></tr><tr><td>472</td><td><code><pre>        newSlotObj := &amp;LobbySlot{</pre></code></td></tr><tr><td>473</td><td><code><pre>                PlayerID: player.ID,</pre></code></td></tr><tr><td>474</td><td><code><pre>                LobbyID:  lobby.ID,</pre></code></td></tr><tr><td>475</td><td><code><pre>                Slot:     slot,</pre></code></td></tr><tr><td>476</td><td><code><pre>        }</pre></code></td></tr><tr><td>477</td><td><code><pre></pre></code></td></tr><tr><td>478</td><td><code><pre>        db.DB.Create(newSlotObj)</pre></code></td></tr><tr><td>479</td><td><code><pre></pre></code></td></tr><tr><td>480</td><td><code><pre>        lobby.OnChange(true)</pre></code></td></tr><tr><td>481</td><td><code><pre></pre></code></td></tr><tr><td>482</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>483</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_decorateSlotDetails">func decorateSlotDetails</div><div class="info"><a href="#s_fn_decorateSlotDetails">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>90</td><td><code><pre>func decorateSlotDetails(lobby *Lobby, slot int, includeDetails bool) SlotDetails {</pre></code></td></tr><tr><td>91</td><td><code><pre>        playerId, err := lobby.GetPlayerIDBySlot(slot)</pre></code></td></tr><tr><td>92</td><td><code><pre>        j := SlotDetails{Filled: err == nil}</pre></code></td></tr><tr><td>93</td><td><code><pre></pre></code></td></tr><tr><td>94</td><td><code><pre>        if err == nil &amp;&amp; includeDetails {</pre></code></td></tr><tr><td>95</td><td><code><pre>                var player Player</pre></code></td></tr><tr><td>96</td><td><code><pre>                db.DB.First(&amp;player, playerId)</pre></code></td></tr><tr><td>97</td><td><code><pre>                db.DB.Preload(&#34;Stats&#34;).First(&amp;player, player.ID)</pre></code></td></tr><tr><td>98</td><td><code><pre></pre></code></td></tr><tr><td>99</td><td><code><pre>                summary := DecoratePlayerSummary(&amp;player)</pre></code></td></tr><tr><td>100</td><td><code><pre>                j.Player = &amp;summary</pre></code></td></tr><tr><td>101</td><td><code><pre></pre></code></td></tr><tr><td>102</td><td><code><pre>                ready, _ := lobby.IsPlayerReady(&amp;player)</pre></code></td></tr><tr><td>103</td><td><code><pre>                j.Ready = &amp;ready</pre></code></td></tr><tr><td>104</td><td><code><pre></pre></code></td></tr><tr><td>105</td><td><code><pre>                ingame, _ := lobby.IsPlayerInGame(&amp;player)</pre></code></td></tr><tr><td>106</td><td><code><pre>                j.InGame = &amp;ingame</pre></code></td></tr><tr><td>107</td><td><code><pre></pre></code></td></tr><tr><td>108</td><td><code><pre>                if lobby.HasSlotRequirement(slot) {</pre></code></td></tr><tr class="miss"><td>109</td><td><code><pre>                        j.Requirements, _ = lobby.GetSlotRequirement(slot)</pre></code></td></tr><tr><td>110</td><td><code><pre>                } else if lobby.HasGeneralRequirement() {</pre></code></td></tr><tr class="miss"><td>111</td><td><code><pre>                        j.Requirements, _ = lobby.GetGeneralRequirement()</pre></code></td></tr><tr><td>112</td><td><code><pre>                }</pre></code></td></tr><tr><td>113</td><td><code><pre>        }</pre></code></td></tr><tr><td>114</td><td><code><pre></pre></code></td></tr><tr><td>115</td><td><code><pre>        return j</pre></code></td></tr><tr><td>116</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LoadLobbySettings">func LoadLobbySettings</div><div class="info"><a href="#s_fn_LoadLobbySettings">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>145</td><td><code><pre>func LoadLobbySettings(data []byte) error {</pre></code></td></tr><tr><td>146</td><td><code><pre>        var args struct {</pre></code></td></tr><tr><td>147</td><td><code><pre>                Formats []struct {</pre></code></td></tr><tr><td>148</td><td><code><pre>                        Name       string `json:&#34;name&#34;`</pre></code></td></tr><tr><td>149</td><td><code><pre>                        PrettyName string `json:&#34;prettyName&#34;`</pre></code></td></tr><tr><td>150</td><td><code><pre>                        Important  bool   `json:&#34;important&#34;`</pre></code></td></tr><tr><td>151</td><td><code><pre>                } `json:&#34;formats&#34;`</pre></code></td></tr><tr><td>152</td><td><code><pre>                Maps []struct {</pre></code></td></tr><tr><td>153</td><td><code><pre>                        Name    string         `json:&#34;name&#34;`</pre></code></td></tr><tr><td>154</td><td><code><pre>                        Formats map[string]int `json:&#34;formats&#34;`</pre></code></td></tr><tr><td>155</td><td><code><pre>                } `json:&#34;maps&#34;`</pre></code></td></tr><tr><td>156</td><td><code><pre>                Leagues []struct {</pre></code></td></tr><tr><td>157</td><td><code><pre>                        Name         string            `json:&#34;name&#34;`</pre></code></td></tr><tr><td>158</td><td><code><pre>                        PrettyName   string            `json:&#34;prettyName&#34;`</pre></code></td></tr><tr><td>159</td><td><code><pre>                        Descriptions map[string]string `json:&#34;descriptions&#34;`</pre></code></td></tr><tr><td>160</td><td><code><pre>                        Formats      map[string]bool   `json:&#34;formats&#34;`</pre></code></td></tr><tr><td>161</td><td><code><pre>                } `json:&#34;leagues&#34;`</pre></code></td></tr><tr><td>162</td><td><code><pre>                Whitelists []struct {</pre></code></td></tr><tr><td>163</td><td><code><pre>                        ID         int    `json:&#34;id&#34;`</pre></code></td></tr><tr><td>164</td><td><code><pre>                        PrettyName string `json:&#34;prettyName&#34;`</pre></code></td></tr><tr><td>165</td><td><code><pre>                        League     string `json:&#34;league&#34;`</pre></code></td></tr><tr><td>166</td><td><code><pre>                        Format     string `json:&#34;format&#34;`</pre></code></td></tr><tr><td>167</td><td><code><pre>                } `json:&#34;whitelists&#34;`</pre></code></td></tr><tr><td>168</td><td><code><pre>        }</pre></code></td></tr><tr><td>169</td><td><code><pre></pre></code></td></tr><tr><td>170</td><td><code><pre>        err := json.Unmarshal(data, &amp;args)</pre></code></td></tr><tr><td>171</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>172</td><td><code><pre>                panic(err)</pre></code></td></tr><tr class="miss"><td>173</td><td><code><pre>                return err</pre></code></td></tr><tr><td>174</td><td><code><pre>        }</pre></code></td></tr><tr><td>175</td><td><code><pre></pre></code></td></tr><tr><td>176</td><td><code><pre>        // formats</pre></code></td></tr><tr><td>177</td><td><code><pre>        LobbyFormats = make([]LobbyFormat, len(args.Formats))</pre></code></td></tr><tr><td>178</td><td><code><pre>        lobbyFormatFromName = make(map[string]int)</pre></code></td></tr><tr><td>179</td><td><code><pre>        for i, format := range args.Formats {</pre></code></td></tr><tr><td>180</td><td><code><pre>                LobbyFormats[i] = LobbyFormat{</pre></code></td></tr><tr><td>181</td><td><code><pre>                        Name:       format.Name,</pre></code></td></tr><tr><td>182</td><td><code><pre>                        PrettyName: format.PrettyName,</pre></code></td></tr><tr><td>183</td><td><code><pre>                        Important:  format.Important,</pre></code></td></tr><tr><td>184</td><td><code><pre>                }</pre></code></td></tr><tr><td>185</td><td><code><pre>                lobbyFormatFromName[format.Name] = i</pre></code></td></tr><tr><td>186</td><td><code><pre>        }</pre></code></td></tr><tr><td>187</td><td><code><pre></pre></code></td></tr><tr><td>188</td><td><code><pre>        // maps</pre></code></td></tr><tr><td>189</td><td><code><pre>        LobbyMaps = make([]LobbyMap, len(args.Maps))</pre></code></td></tr><tr><td>190</td><td><code><pre>        lobbyMapFromName = make(map[string]int)</pre></code></td></tr><tr><td>191</td><td><code><pre>        for i, amap := range args.Maps {</pre></code></td></tr><tr><td>192</td><td><code><pre>                lobbyMap := LobbyMap{</pre></code></td></tr><tr><td>193</td><td><code><pre>                        Name:    amap.Name,</pre></code></td></tr><tr><td>194</td><td><code><pre>                        Formats: make([]*LobbyMapFormat, 0, len(amap.Formats)),</pre></code></td></tr><tr><td>195</td><td><code><pre>                }</pre></code></td></tr><tr><td>196</td><td><code><pre>                for name, importance := range amap.Formats {</pre></code></td></tr><tr><td>197</td><td><code><pre>                        if lobbyFormat, ok := GetLobbyFormat(name); ok {</pre></code></td></tr><tr><td>198</td><td><code><pre>                                lobbyMap.Formats = append(lobbyMap.Formats, &amp;LobbyMapFormat{</pre></code></td></tr><tr><td>199</td><td><code><pre>                                        Format:     lobbyFormat,</pre></code></td></tr><tr><td>200</td><td><code><pre>                                        Importance: importance,</pre></code></td></tr><tr><td>201</td><td><code><pre>                                })</pre></code></td></tr><tr><td>202</td><td><code><pre>                        } else {</pre></code></td></tr><tr class="miss"><td>203</td><td><code><pre>                                return errors.New(fmt.Sprintf(&#34;Referenced a non existing format %q&#34;, name))</pre></code></td></tr><tr><td>204</td><td><code><pre>                        }</pre></code></td></tr><tr><td>205</td><td><code><pre>                }</pre></code></td></tr><tr><td>206</td><td><code><pre></pre></code></td></tr><tr><td>207</td><td><code><pre>                LobbyMaps[i] = lobbyMap</pre></code></td></tr><tr><td>208</td><td><code><pre>                lobbyMapFromName[amap.Name] = i</pre></code></td></tr><tr><td>209</td><td><code><pre>        }</pre></code></td></tr><tr><td>210</td><td><code><pre></pre></code></td></tr><tr><td>211</td><td><code><pre>        // leagues</pre></code></td></tr><tr><td>212</td><td><code><pre>        LobbyLeagues = make([]LobbyLeague, len(args.Leagues))</pre></code></td></tr><tr><td>213</td><td><code><pre>        lobbyLeagueFromName = make(map[string]int)</pre></code></td></tr><tr><td>214</td><td><code><pre>        for i, league := range args.Leagues {</pre></code></td></tr><tr><td>215</td><td><code><pre>                lobbyLeague := LobbyLeague{</pre></code></td></tr><tr><td>216</td><td><code><pre>                        Name:         league.Name,</pre></code></td></tr><tr><td>217</td><td><code><pre>                        PrettyName:   league.PrettyName,</pre></code></td></tr><tr><td>218</td><td><code><pre>                        Descriptions: make([]*LobbyLeagueDescription, 0, len(league.Descriptions)),</pre></code></td></tr><tr><td>219</td><td><code><pre>                        Formats:      make([]*LobbyLeagueFormat, 0, len(league.Formats)),</pre></code></td></tr><tr><td>220</td><td><code><pre>                }</pre></code></td></tr><tr><td>221</td><td><code><pre>                for atype, description := range league.Descriptions {</pre></code></td></tr><tr><td>222</td><td><code><pre>                        lobbyLeagueDescription := &amp;LobbyLeagueDescription{</pre></code></td></tr><tr><td>223</td><td><code><pre>                                MapType:     MapType(atype),</pre></code></td></tr><tr><td>224</td><td><code><pre>                                Description: description,</pre></code></td></tr><tr><td>225</td><td><code><pre>                        }</pre></code></td></tr><tr><td>226</td><td><code><pre>                        lobbyLeague.Descriptions = append(lobbyLeague.Descriptions, lobbyLeagueDescription)</pre></code></td></tr><tr><td>227</td><td><code><pre>                }</pre></code></td></tr><tr><td>228</td><td><code><pre>                for name, used := range league.Formats {</pre></code></td></tr><tr><td>229</td><td><code><pre>                        if lobbyFormat, ok := GetLobbyFormat(name); ok {</pre></code></td></tr><tr><td>230</td><td><code><pre>                                lobbyLeagueFormat := &amp;LobbyLeagueFormat{</pre></code></td></tr><tr><td>231</td><td><code><pre>                                        Format: lobbyFormat,</pre></code></td></tr><tr><td>232</td><td><code><pre>                                        Used:   used,</pre></code></td></tr><tr><td>233</td><td><code><pre>                                }</pre></code></td></tr><tr><td>234</td><td><code><pre>                                lobbyLeague.Formats = append(lobbyLeague.Formats, lobbyLeagueFormat)</pre></code></td></tr><tr><td>235</td><td><code><pre>                        } else {</pre></code></td></tr><tr class="miss"><td>236</td><td><code><pre>                                return errors.New(fmt.Sprintf(&#34;Referenced a non existing format %q&#34;, name))</pre></code></td></tr><tr><td>237</td><td><code><pre>                        }</pre></code></td></tr><tr><td>238</td><td><code><pre>                }</pre></code></td></tr><tr><td>239</td><td><code><pre></pre></code></td></tr><tr><td>240</td><td><code><pre>                LobbyLeagues[i] = lobbyLeague</pre></code></td></tr><tr><td>241</td><td><code><pre>                lobbyLeagueFromName[league.Name] = i</pre></code></td></tr><tr><td>242</td><td><code><pre>        }</pre></code></td></tr><tr><td>243</td><td><code><pre></pre></code></td></tr><tr><td>244</td><td><code><pre>        // whitelists</pre></code></td></tr><tr><td>245</td><td><code><pre>        LobbyWhitelists = make([]LobbyWhitelist, len(args.Whitelists))</pre></code></td></tr><tr><td>246</td><td><code><pre>        lobbyWhitelistFromID = make(map[int]int)</pre></code></td></tr><tr><td>247</td><td><code><pre>        for i, whitelist := range args.Whitelists {</pre></code></td></tr><tr><td>248</td><td><code><pre>                if lobbyLeague, ok := GetLobbyLeague(whitelist.League); ok {</pre></code></td></tr><tr><td>249</td><td><code><pre>                        if lobbyFormat, ok := GetLobbyFormat(whitelist.Format); ok {</pre></code></td></tr><tr><td>250</td><td><code><pre>                                lobbyWhitelist := LobbyWhitelist{</pre></code></td></tr><tr><td>251</td><td><code><pre>                                        ID:         whitelist.ID,</pre></code></td></tr><tr><td>252</td><td><code><pre>                                        PrettyName: whitelist.PrettyName,</pre></code></td></tr><tr><td>253</td><td><code><pre>                                        League:     lobbyLeague,</pre></code></td></tr><tr><td>254</td><td><code><pre>                                        Format:     lobbyFormat,</pre></code></td></tr><tr><td>255</td><td><code><pre>                                }</pre></code></td></tr><tr><td>256</td><td><code><pre></pre></code></td></tr><tr><td>257</td><td><code><pre>                                LobbyWhitelists[i] = lobbyWhitelist</pre></code></td></tr><tr><td>258</td><td><code><pre>                                lobbyWhitelistFromID[whitelist.ID] = i</pre></code></td></tr><tr><td>259</td><td><code><pre>                        } else {</pre></code></td></tr><tr class="miss"><td>260</td><td><code><pre>                                return errors.New(fmt.Sprintf(&#34;Referenced a non existing format %q&#34;, whitelist.Format))</pre></code></td></tr><tr><td>261</td><td><code><pre>                        }</pre></code></td></tr><tr><td>262</td><td><code><pre>                } else {</pre></code></td></tr><tr class="miss"><td>263</td><td><code><pre>                        return errors.New(fmt.Sprintf(&#34;Referenced a non existing league %q&#34;, whitelist.League))</pre></code></td></tr><tr><td>264</td><td><code><pre>                }</pre></code></td></tr><tr><td>265</td><td><code><pre>        }</pre></code></td></tr><tr><td>266</td><td><code><pre></pre></code></td></tr><tr><td>267</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>268</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.UpdateStats">func Lobby.UpdateStats</div><div class="info"><a href="#s_fn_Lobby.UpdateStats">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>675</td><td><code><pre>func (lobby *Lobby) UpdateStats() {</pre></code></td></tr><tr><td>676</td><td><code><pre>        slots := [](*LobbySlot){}</pre></code></td></tr><tr><td>677</td><td><code><pre>        db.DB.Where(&#34;lobby_id = ?&#34;, lobby.ID).Find(&amp;slots)</pre></code></td></tr><tr><td>678</td><td><code><pre></pre></code></td></tr><tr><td>679</td><td><code><pre>        for _, slot := range slots {</pre></code></td></tr><tr><td>680</td><td><code><pre>                player := &amp;Player{}</pre></code></td></tr><tr><td>681</td><td><code><pre>                err := db.DB.First(player, slot.PlayerID).Error</pre></code></td></tr><tr><td>682</td><td><code><pre>                if err != nil {</pre></code></td></tr><tr class="miss"><td>683</td><td><code><pre>                        helpers.Logger.Critical(&#34;%s&#34;, err.Error())</pre></code></td></tr><tr class="miss"><td>684</td><td><code><pre>                        return</pre></code></td></tr><tr><td>685</td><td><code><pre>                }</pre></code></td></tr><tr><td>686</td><td><code><pre>                db.DB.Preload(&#34;Stats&#34;).First(player, slot.PlayerID)</pre></code></td></tr><tr><td>687</td><td><code><pre>                player.Stats.PlayedCountIncrease(lobby.Type)</pre></code></td></tr><tr><td>688</td><td><code><pre>                player.Save()</pre></code></td></tr><tr><td>689</td><td><code><pre>        }</pre></code></td></tr><tr><td>690</td><td><code><pre>        lobby.OnChange(false)</pre></code></td></tr><tr><td>691</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetLobbyByID">func GetLobbyByID</div><div class="info"><a href="#s_fn_GetLobbyByID">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>340</td><td><code><pre>func GetLobbyByID(id uint) (*Lobby, *helpers.TPError) {</pre></code></td></tr><tr><td>341</td><td><code><pre>        nonExistentLobby := helpers.NewTPError(&#34;Lobby not in the database&#34;, -1)</pre></code></td></tr><tr><td>342</td><td><code><pre></pre></code></td></tr><tr><td>343</td><td><code><pre>        lob := &amp;Lobby{}</pre></code></td></tr><tr><td>344</td><td><code><pre>        err := db.DB.First(lob, id).Error</pre></code></td></tr><tr><td>345</td><td><code><pre></pre></code></td></tr><tr><td>346</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>347</td><td><code><pre>                return nil, nonExistentLobby</pre></code></td></tr><tr><td>348</td><td><code><pre>        }</pre></code></td></tr><tr><td>349</td><td><code><pre></pre></code></td></tr><tr><td>350</td><td><code><pre>        return lob, nil</pre></code></td></tr><tr><td>351</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LobbyMap.GetFormat">func LobbyMap.GetFormat</div><div class="info"><a href="#s_fn_LobbyMap.GetFormat">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>37</td><td><code><pre>func (m *LobbyMap) GetFormat(formatName string) (*LobbyMapFormat, bool) {</pre></code></td></tr><tr><td>38</td><td><code><pre>        for _, mapFormat := range m.Formats {</pre></code></td></tr><tr><td>39</td><td><code><pre>                if mapFormat.Format.Name == formatName {</pre></code></td></tr><tr><td>40</td><td><code><pre>                        return mapFormat, true</pre></code></td></tr><tr><td>41</td><td><code><pre>                }</pre></code></td></tr><tr><td>42</td><td><code><pre>        }</pre></code></td></tr><tr><td>43</td><td><code><pre>        if format, ok := GetLobbyFormat(formatName); ok {</pre></code></td></tr><tr><td>44</td><td><code><pre>                return &amp;LobbyMapFormat{</pre></code></td></tr><tr><td>45</td><td><code><pre>                        Format:     format,</pre></code></td></tr><tr><td>46</td><td><code><pre>                        Importance: 0,</pre></code></td></tr><tr><td>47</td><td><code><pre>                }, true</pre></code></td></tr><tr><td>48</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>49</td><td><code><pre>        return nil, false</pre></code></td></tr><tr><td>50</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LobbyGetSlotInfo">func LobbyGetSlotInfo</div><div class="info"><a href="#s_fn_LobbyGetSlotInfo">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/classMaps.go</code>:</p></div><table class="listing">
<tr><td>125</td><td><code><pre>func LobbyGetSlotInfo(lobbytype LobbyType, slot int) (int, int, *helpers.TPError) {</pre></code></td></tr><tr><td>126</td><td><code><pre>        classList := typeClassList[lobbytype]</pre></code></td></tr><tr><td>127</td><td><code><pre></pre></code></td></tr><tr><td>128</td><td><code><pre>        if slot &lt; len(classList) {</pre></code></td></tr><tr><td>129</td><td><code><pre>                return 0, slot, nil</pre></code></td></tr><tr><td>130</td><td><code><pre>        } else if slot &lt; 2*len(classList) {</pre></code></td></tr><tr><td>131</td><td><code><pre>                return 1, slot - len(classList), nil</pre></code></td></tr><tr><td>132</td><td><code><pre>        } else {</pre></code></td></tr><tr class="miss"><td>133</td><td><code><pre>                return 0, 0, helpers.NewTPError(&#34;Invalid slot&#34;, -1)</pre></code></td></tr><tr><td>134</td><td><code><pre>        }</pre></code></td></tr><tr><td>135</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.RemovePlayer">func Lobby.RemovePlayer</div><div class="info"><a href="#s_fn_Lobby.RemovePlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>486</td><td><code><pre>func (lobby *Lobby) RemovePlayer(player *Player) *helpers.TPError {</pre></code></td></tr><tr><td>487</td><td><code><pre>        err := db.DB.Where(&#34;player_id = ? AND lobby_id = ?&#34;, player.ID, lobby.ID).Delete(&amp;LobbySlot{}).Error</pre></code></td></tr><tr><td>488</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>489</td><td><code><pre>                return helpers.NewTPError(err.Error(), -1)</pre></code></td></tr><tr><td>490</td><td><code><pre>        }</pre></code></td></tr><tr><td>491</td><td><code><pre></pre></code></td></tr><tr><td>492</td><td><code><pre>        DisallowPlayer(lobby.ID, player.SteamID)</pre></code></td></tr><tr><td>493</td><td><code><pre>        lobby.OnChange(true)</pre></code></td></tr><tr><td>494</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>495</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetLobbyByIDServer">func GetLobbyByIDServer</div><div class="info"><a href="#s_fn_GetLobbyByIDServer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>326</td><td><code><pre>func GetLobbyByIDServer(id uint) (*Lobby, *helpers.TPError) {</pre></code></td></tr><tr><td>327</td><td><code><pre>        nonExistentLobby := helpers.NewTPError(&#34;Lobby not in the database&#34;, -1)</pre></code></td></tr><tr><td>328</td><td><code><pre></pre></code></td></tr><tr><td>329</td><td><code><pre>        lob := &amp;Lobby{}</pre></code></td></tr><tr><td>330</td><td><code><pre>        err := db.DB.Preload(&#34;ServerInfo&#34;).First(lob, id).Error</pre></code></td></tr><tr><td>331</td><td><code><pre></pre></code></td></tr><tr><td>332</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>333</td><td><code><pre>                return nil, nonExistentLobby</pre></code></td></tr><tr><td>334</td><td><code><pre>        }</pre></code></td></tr><tr><td>335</td><td><code><pre></pre></code></td></tr><tr><td>336</td><td><code><pre>        return lob, nil</pre></code></td></tr><tr><td>337</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.SubNotInGamePlayers">func Lobby.SubNotInGamePlayers</div><div class="info"><a href="#s_fn_Lobby.SubNotInGamePlayers">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>712</td><td><code><pre>func (lobby *Lobby) SubNotInGamePlayers() {</pre></code></td></tr><tr><td>713</td><td><code><pre>        playerids := []uint{}</pre></code></td></tr><tr><td>714</td><td><code><pre>        db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND in_game = ?&#34;, lobby.ID, false).Pluck(&#34;player_id&#34;, &amp;playerids)</pre></code></td></tr><tr><td>715</td><td><code><pre></pre></code></td></tr><tr><td>716</td><td><code><pre>        for _, id := range playerids {</pre></code></td></tr><tr><td>717</td><td><code><pre>                var count int</pre></code></td></tr><tr><td>718</td><td><code><pre>                db.DB.Table(&#34;substitutes&#34;).Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, id).Count(&amp;count)</pre></code></td></tr><tr><td>719</td><td><code><pre>                if count != 0 {</pre></code></td></tr><tr><td>720</td><td><code><pre>                        //player has already been reported in game, don&#39;t sub them</pre></code></td></tr><tr class="miss"><td>721</td><td><code><pre>                        continue</pre></code></td></tr><tr><td>722</td><td><code><pre>                }</pre></code></td></tr><tr><td>723</td><td><code><pre></pre></code></td></tr><tr><td>724</td><td><code><pre>                sub, err := NewSub(lobby.ID, id)</pre></code></td></tr><tr><td>725</td><td><code><pre>                if err != nil {</pre></code></td></tr><tr class="miss"><td>726</td><td><code><pre>                        helpers.Logger.Error(err.Error())</pre></code></td></tr><tr class="miss"><td>727</td><td><code><pre>                        continue</pre></code></td></tr><tr><td>728</td><td><code><pre>                }</pre></code></td></tr><tr><td>729</td><td><code><pre>                sub.Save()</pre></code></td></tr><tr><td>730</td><td><code><pre>                player, _ := GetPlayerByID(id)</pre></code></td></tr><tr><td>731</td><td><code><pre>                SendNotification(fmt.Sprintf(&#34;%s has been reported for not joining the game.&#34;, player.Alias()), int(lobby.ID))</pre></code></td></tr><tr><td>732</td><td><code><pre>        }</pre></code></td></tr><tr><td>733</td><td><code><pre>        lobby.OnChange(true)</pre></code></td></tr><tr><td>734</td><td><code><pre>        BroadcastSubList()</pre></code></td></tr><tr><td>735</td><td><code><pre>        return</pre></code></td></tr><tr><td>736</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.GetActiveBans">func Player.GetActiveBans</div><div class="info"><a href="#s_fn_Player.GetActiveBans">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>283</td><td><code><pre>func (player *Player) GetActiveBans() ([]*PlayerBan, error) {</pre></code></td></tr><tr><td>284</td><td><code><pre>        var bans []*PlayerBan</pre></code></td></tr><tr><td>285</td><td><code><pre>        err := db.DB.Where(&#34;player_id = ? AND active = TRUE AND until &gt; now()&#34;, player.ID).Find(&amp;bans).Error</pre></code></td></tr><tr><td>286</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>287</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>288</td><td><code><pre>        }</pre></code></td></tr><tr><td>289</td><td><code><pre>        return bans, nil</pre></code></td></tr><tr><td>290</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.ReadyPlayer">func Lobby.ReadyPlayer</div><div class="info"><a href="#s_fn_Lobby.ReadyPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>504</td><td><code><pre>func (lobby *Lobby) ReadyPlayer(player *Player) *helpers.TPError {</pre></code></td></tr><tr><td>505</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, player.ID).UpdateColumn(&#34;ready&#34;, true).Error</pre></code></td></tr><tr><td>506</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>507</td><td><code><pre>                return helpers.NewTPError(&#34;Player is not in the lobby.&#34;, 5)</pre></code></td></tr><tr><td>508</td><td><code><pre>        }</pre></code></td></tr><tr><td>509</td><td><code><pre>        lobby.OnChange(false)</pre></code></td></tr><tr><td>510</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>511</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.UnreadyPlayer">func Lobby.UnreadyPlayer</div><div class="info"><a href="#s_fn_Lobby.UnreadyPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>514</td><td><code><pre>func (lobby *Lobby) UnreadyPlayer(player *Player) *helpers.TPError {</pre></code></td></tr><tr><td>515</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, player.ID).UpdateColumn(&#34;ready&#34;, false).Error</pre></code></td></tr><tr><td>516</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>517</td><td><code><pre>                return helpers.NewTPError(&#34;Player is not in the lobby.&#34;, 5)</pre></code></td></tr><tr><td>518</td><td><code><pre>        }</pre></code></td></tr><tr><td>519</td><td><code><pre></pre></code></td></tr><tr><td>520</td><td><code><pre>        lobby.OnChange(false)</pre></code></td></tr><tr><td>521</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>522</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.IsPlayerInGame">func Lobby.IsPlayerInGame</div><div class="info"><a href="#s_fn_Lobby.IsPlayerInGame">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>548</td><td><code><pre>func (lobby *Lobby) IsPlayerInGame(player *Player) (bool, error) {</pre></code></td></tr><tr><td>549</td><td><code><pre>        ingame := []bool{}</pre></code></td></tr><tr><td>550</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, player.ID).Pluck(&#34;in_game&#34;, &amp;ingame).Error</pre></code></td></tr><tr><td>551</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>552</td><td><code><pre>                return false, err</pre></code></td></tr><tr><td>553</td><td><code><pre>        }</pre></code></td></tr><tr><td>554</td><td><code><pre></pre></code></td></tr><tr><td>555</td><td><code><pre>        return (len(ingame) != 0 &amp;&amp; ingame[0]), err</pre></code></td></tr><tr><td>556</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.IsPlayerReady">func Lobby.IsPlayerReady</div><div class="info"><a href="#s_fn_Lobby.IsPlayerReady">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>559</td><td><code><pre>func (lobby *Lobby) IsPlayerReady(player *Player) (bool, *helpers.TPError) {</pre></code></td></tr><tr><td>560</td><td><code><pre>        ready := []bool{}</pre></code></td></tr><tr><td>561</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ? AND player_id = ?&#34;, lobby.ID, player.ID).Pluck(&#34;ready&#34;, &amp;ready).Error</pre></code></td></tr><tr><td>562</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>563</td><td><code><pre>                return false, helpers.NewTPError(&#34;Player is not in the lobby.&#34;, 5)</pre></code></td></tr><tr><td>564</td><td><code><pre>        }</pre></code></td></tr><tr><td>565</td><td><code><pre>        return (len(ready) != 0 &amp;&amp; ready[0]), nil</pre></code></td></tr><tr><td>566</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.AddSpectator">func Lobby.AddSpectator</div><div class="info"><a href="#s_fn_Lobby.AddSpectator">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>591</td><td><code><pre>func (lobby *Lobby) AddSpectator(player *Player) *helpers.TPError {</pre></code></td></tr><tr><td>592</td><td><code><pre>        err := db.DB.Model(lobby).Association(&#34;Spectators&#34;).Append(player).Error</pre></code></td></tr><tr><td>593</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>594</td><td><code><pre>                return helpers.NewTPError(err.Error(), -1)</pre></code></td></tr><tr><td>595</td><td><code><pre>        }</pre></code></td></tr><tr><td>596</td><td><code><pre>        lobby.OnChange(false)</pre></code></td></tr><tr><td>597</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>598</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecoratePlayerSummary">func DecoratePlayerSummary</div><div class="info"><a href="#s_fn_DecoratePlayerSummary">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player_decorators.go</code>:</p></div><table class="listing">
<tr><td>76</td><td><code><pre>func DecoratePlayerSummary(p *Player) PlayerSummary {</pre></code></td></tr><tr><td>77</td><td><code><pre>        summary := PlayerSummary{</pre></code></td></tr><tr><td>78</td><td><code><pre>                Avatar:        p.Avatar,</pre></code></td></tr><tr><td>79</td><td><code><pre>                GameHours:     p.GameHours,</pre></code></td></tr><tr><td>80</td><td><code><pre>                ProfileURL:    p.Profileurl,</pre></code></td></tr><tr><td>81</td><td><code><pre>                LobbiesPlayed: p.Stats.PlayedHighlanderCount + p.Stats.PlayedSixesCount,</pre></code></td></tr><tr><td>82</td><td><code><pre>                SteamID:       p.SteamID,</pre></code></td></tr><tr><td>83</td><td><code><pre>                Name:          p.Name,</pre></code></td></tr><tr><td>84</td><td><code><pre>                Tags:          decoratePlayerTags(p),</pre></code></td></tr><tr><td>85</td><td><code><pre>                Role:          helpers.RoleNames[p.Role],</pre></code></td></tr><tr><td>86</td><td><code><pre>        }</pre></code></td></tr><tr><td>87</td><td><code><pre></pre></code></td></tr><tr><td>88</td><td><code><pre>        alias, _ := p.GetSetting(&#34;siteAlias&#34;)</pre></code></td></tr><tr><td>89</td><td><code><pre>        if alias.Value != &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>90</td><td><code><pre>                summary.Name = alias.Value</pre></code></td></tr><tr><td>91</td><td><code><pre>        }</pre></code></td></tr><tr><td>92</td><td><code><pre></pre></code></td></tr><tr><td>93</td><td><code><pre>        return summary</pre></code></td></tr><tr><td>94</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.GetSpectatingIds">func Player.GetSpectatingIds</div><div class="info"><a href="#s_fn_Player.GetSpectatingIds">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>174</td><td><code><pre>func (player *Player) GetSpectatingIds() ([]uint, *helpers.TPError) {</pre></code></td></tr><tr><td>175</td><td><code><pre>        var ids []uint</pre></code></td></tr><tr><td>176</td><td><code><pre>        err := db.DB.Model(&amp;Lobby{}).</pre></code></td></tr><tr><td>177</td><td><code><pre>                Joins(&#34;INNER JOIN spectators_players_lobbies l ON l.lobby_id = lobbies.id&#34;).</pre></code></td></tr><tr><td>178</td><td><code><pre>                Where(&#34;l.player_id = ? AND lobbies.state &lt;&gt; ?&#34;, player.ID, LobbyStateEnded).</pre></code></td></tr><tr><td>179</td><td><code><pre>                Pluck(&#34;id&#34;, &amp;ids).Error</pre></code></td></tr><tr><td>180</td><td><code><pre></pre></code></td></tr><tr><td>181</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>182</td><td><code><pre>                return nil, helpers.NewTPError(err.Error(), 1)</pre></code></td></tr><tr><td>183</td><td><code><pre>        }</pre></code></td></tr><tr><td>184</td><td><code><pre></pre></code></td></tr><tr><td>185</td><td><code><pre>        return ids, nil</pre></code></td></tr><tr><td>186</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.IsSpectatingID">func Player.IsSpectatingID</div><div class="info"><a href="#s_fn_Player.IsSpectatingID">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>164</td><td><code><pre>func (player *Player) IsSpectatingID(lobbyid uint) bool {</pre></code></td></tr><tr><td>165</td><td><code><pre>        count := 0</pre></code></td></tr><tr><td>166</td><td><code><pre>        err := db.DB.Table(&#34;spectators_players_lobbies&#34;).Where(&#34;player_id = ? AND lobby_id = ?&#34;, player.ID, lobbyid).Count(&amp;count).Error</pre></code></td></tr><tr><td>167</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>168</td><td><code><pre>                return false</pre></code></td></tr><tr><td>169</td><td><code><pre>        }</pre></code></td></tr><tr><td>170</td><td><code><pre>        return count != 0</pre></code></td></tr><tr><td>171</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetPlayerWithStats">func GetPlayerWithStats</div><div class="info"><a href="#s_fn_GetPlayerWithStats">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>133</td><td><code><pre>func GetPlayerWithStats(steamid string) (*Player, *helpers.TPError) {</pre></code></td></tr><tr><td>134</td><td><code><pre>        var player = Player{}</pre></code></td></tr><tr><td>135</td><td><code><pre>        err := db.DB.Where(&#34;steam_id = ?&#34;, steamid).Preload(&#34;Stats&#34;).First(&amp;player).Error</pre></code></td></tr><tr><td>136</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>137</td><td><code><pre>                return nil, helpers.NewTPError(&#34;Player is not in the database&#34;, -1)</pre></code></td></tr><tr><td>138</td><td><code><pre>        }</pre></code></td></tr><tr><td>139</td><td><code><pre>        return &amp;player, nil</pre></code></td></tr><tr><td>140</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetPlayerBySteamID">func GetPlayerBySteamID</div><div class="info"><a href="#s_fn_GetPlayerBySteamID">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>123</td><td><code><pre>func GetPlayerBySteamID(steamid string) (*Player, *helpers.TPError) {</pre></code></td></tr><tr><td>124</td><td><code><pre>        var player = Player{}</pre></code></td></tr><tr><td>125</td><td><code><pre>        err := db.DB.Where(&#34;steam_id = ?&#34;, steamid).First(&amp;player).Error</pre></code></td></tr><tr><td>126</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>127</td><td><code><pre>                return nil, helpers.NewTPError(&#34;Player is not in the database&#34;, -1)</pre></code></td></tr><tr><td>128</td><td><code><pre>        }</pre></code></td></tr><tr><td>129</td><td><code><pre>        return &amp;player, nil</pre></code></td></tr><tr><td>130</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.GetPlayerNumber">func Lobby.GetPlayerNumber</div><div class="info"><a href="#s_fn_Lobby.GetPlayerNumber">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>614</td><td><code><pre>func (lobby *Lobby) GetPlayerNumber() int {</pre></code></td></tr><tr><td>615</td><td><code><pre>        count := 0</pre></code></td></tr><tr><td>616</td><td><code><pre>        err := db.DB.Table(&#34;lobby_slots&#34;).Where(&#34;lobby_id = ?&#34;, lobby.ID).Count(&amp;count).Error</pre></code></td></tr><tr><td>617</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>618</td><td><code><pre>                return 0</pre></code></td></tr><tr><td>619</td><td><code><pre>        }</pre></code></td></tr><tr><td>620</td><td><code><pre>        return count</pre></code></td></tr><tr><td>621</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetPlayerByID">func GetPlayerByID</div><div class="info"><a href="#s_fn_GetPlayerByID">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>112</td><td><code><pre>func GetPlayerByID(ID uint) (*Player, error) {</pre></code></td></tr><tr><td>113</td><td><code><pre>        player := &amp;Player{}</pre></code></td></tr><tr><td>114</td><td><code><pre></pre></code></td></tr><tr><td>115</td><td><code><pre>        if err := db.DB.First(player, ID).Error; err != nil {</pre></code></td></tr><tr class="miss"><td>116</td><td><code><pre>                return nil, err</pre></code></td></tr><tr><td>117</td><td><code><pre>        }</pre></code></td></tr><tr><td>118</td><td><code><pre></pre></code></td></tr><tr><td>119</td><td><code><pre>        return player, nil</pre></code></td></tr><tr><td>120</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.RemoveSpectator">func Lobby.RemoveSpectator</div><div class="info"><a href="#s_fn_Lobby.RemoveSpectator">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>602</td><td><code><pre>func (lobby *Lobby) RemoveSpectator(player *Player, broadcast bool) *helpers.TPError {</pre></code></td></tr><tr><td>603</td><td><code><pre>        err := db.DB.Model(lobby).Association(&#34;Spectators&#34;).Delete(player).Error</pre></code></td></tr><tr><td>604</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>605</td><td><code><pre>                return helpers.NewTPError(err.Error(), -1)</pre></code></td></tr><tr><td>606</td><td><code><pre>        }</pre></code></td></tr><tr><td>607</td><td><code><pre>        if broadcast {</pre></code></td></tr><tr class="miss"><td>608</td><td><code><pre>                lobby.OnChange(false)</pre></code></td></tr><tr><td>609</td><td><code><pre>        }</pre></code></td></tr><tr><td>610</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>611</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetLobbyMap">func GetLobbyMap</div><div class="info"><a href="#s_fn_GetLobbyMap">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>102</td><td><code><pre>func GetLobbyMap(mapName string) (*LobbyMap, bool) {</pre></code></td></tr><tr><td>103</td><td><code><pre>        if amap, ok := lobbyMapFromName[mapName]; ok {</pre></code></td></tr><tr><td>104</td><td><code><pre>                return &amp;LobbyMaps[amap], true</pre></code></td></tr><tr><td>105</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>106</td><td><code><pre>        return nil, false</pre></code></td></tr><tr><td>107</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Say">func Say</div><div class="info"><a href="#s_fn_Say">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>117</td><td><code><pre>func Say(lobbyId uint, text string) {</pre></code></td></tr><tr><td>118</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr><td>119</td><td><code><pre>                return</pre></code></td></tr><tr><td>120</td><td><code><pre>        }</pre></code></td></tr><tr><td>121</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>122</td><td><code><pre>        call(config.Constants.PaulingPort, &#34;Pauling.Say&#34;, &amp;Args{Id: lobbyId, Text: text}, &amp;Args{})</pre></code></td></tr><tr><td>123</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DisallowPlayer">func DisallowPlayer</div><div class="info"><a href="#s_fn_DisallowPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>58</td><td><code><pre>func DisallowPlayer(lobbyId uint, steamId string) error {</pre></code></td></tr><tr><td>59</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr><td>60</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>61</td><td><code><pre>        }</pre></code></td></tr><tr><td>62</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>63</td><td><code><pre>        return call(config.Constants.PaulingPort, &#34;Pauling.DisallowPlayer&#34;, &amp;Args{Id: lobbyId, SteamId: steamId}, &amp;Args{})</pre></code></td></tr><tr><td>64</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_End">func End</div><div class="info"><a href="#s_fn_End">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>109</td><td><code><pre>func End(lobbyId uint) {</pre></code></td></tr><tr><td>110</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr><td>111</td><td><code><pre>                return</pre></code></td></tr><tr><td>112</td><td><code><pre>        }</pre></code></td></tr><tr><td>113</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>114</td><td><code><pre>        call(config.Constants.PaulingPort, &#34;Pauling.End&#34;, &amp;Args{Id: lobbyId}, &amp;Args{})</pre></code></td></tr><tr><td>115</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetLobbyLeague">func GetLobbyLeague</div><div class="info"><a href="#s_fn_GetLobbyLeague">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>109</td><td><code><pre>func GetLobbyLeague(leagueName string) (*LobbyLeague, bool) {</pre></code></td></tr><tr><td>110</td><td><code><pre>        if league, ok := lobbyLeagueFromName[leagueName]; ok {</pre></code></td></tr><tr><td>111</td><td><code><pre>                return &amp;LobbyLeagues[league], true</pre></code></td></tr><tr><td>112</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>113</td><td><code><pre>        return nil, false</pre></code></td></tr><tr><td>114</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetLobbyFormat">func GetLobbyFormat</div><div class="info"><a href="#s_fn_GetLobbyFormat">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>95</td><td><code><pre>func GetLobbyFormat(formatName string) (*LobbyFormat, bool) {</pre></code></td></tr><tr><td>96</td><td><code><pre>        if format, ok := lobbyFormatFromName[formatName]; ok {</pre></code></td></tr><tr><td>97</td><td><code><pre>                return &amp;LobbyFormats[format], true</pre></code></td></tr><tr><td>98</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>99</td><td><code><pre>        return nil, false</pre></code></td></tr><tr><td>100</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecorateLobbyListData">func DecorateLobbyListData</div><div class="info"><a href="#s_fn_DecorateLobbyListData">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>194</td><td><code><pre>func DecorateLobbyListData(lobbies []Lobby) []LobbyData {</pre></code></td></tr><tr><td>195</td><td><code><pre>        var lobbyList = make([]LobbyData, len(lobbies))</pre></code></td></tr><tr><td>196</td><td><code><pre></pre></code></td></tr><tr><td>197</td><td><code><pre>        for i, lobby := range lobbies {</pre></code></td></tr><tr class="miss"><td>198</td><td><code><pre>                lobbyData := DecorateLobbyData(&amp;lobby, false)</pre></code></td></tr><tr class="miss"><td>199</td><td><code><pre>                lobbyList[i] = lobbyData</pre></code></td></tr><tr><td>200</td><td><code><pre>        }</pre></code></td></tr><tr><td>201</td><td><code><pre></pre></code></td></tr><tr><td>202</td><td><code><pre>        return lobbyList</pre></code></td></tr><tr><td>203</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewPlayer">func NewPlayer</div><div class="info"><a href="#s_fn_NewPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>71</td><td><code><pre>func NewPlayer(steamId string) (*Player, error) {</pre></code></td></tr><tr><td>72</td><td><code><pre>        player := &amp;Player{SteamID: steamId}</pre></code></td></tr><tr><td>73</td><td><code><pre></pre></code></td></tr><tr><td>74</td><td><code><pre>        if !config.Constants.SteamApiMockUp {</pre></code></td></tr><tr class="miss"><td>75</td><td><code><pre>                player.Stats = NewPlayerStats()</pre></code></td></tr><tr><td>76</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>77</td><td><code><pre>                err := player.UpdatePlayerInfo()</pre></code></td></tr><tr class="miss"><td>78</td><td><code><pre>                if err != nil {</pre></code></td></tr><tr class="miss"><td>79</td><td><code><pre>                        return &amp;Player{}, err</pre></code></td></tr><tr><td>80</td><td><code><pre>                }</pre></code></td></tr><tr><td>81</td><td><code><pre>        } else {</pre></code></td></tr><tr><td>82</td><td><code><pre>                player.Stats = PlayerStats{}</pre></code></td></tr><tr><td>83</td><td><code><pre>        }</pre></code></td></tr><tr><td>84</td><td><code><pre></pre></code></td></tr><tr><td>85</td><td><code><pre>        return player, nil</pre></code></td></tr><tr><td>86</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.Alias">func Player.Alias</div><div class="info"><a href="#s_fn_Player.Alias">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>89</td><td><code><pre>func (p *Player) Alias() string {</pre></code></td></tr><tr><td>90</td><td><code><pre>        alias, err := p.GetSetting(&#34;siteAlias&#34;)</pre></code></td></tr><tr><td>91</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr><td>92</td><td><code><pre>                return p.Name</pre></code></td></tr><tr><td>93</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>94</td><td><code><pre>        if alias.Value != &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>95</td><td><code><pre>                return alias.Value</pre></code></td></tr><tr><td>96</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>97</td><td><code><pre>        return p.Name</pre></code></td></tr><tr><td>98</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FumbleLobbyPlayerJoined">func FumbleLobbyPlayerJoined</div><div class="info"><a href="#s_fn_FumbleLobbyPlayerJoined">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/fumble.go</code>:</p></div><table class="listing">
<tr><td>80</td><td><code><pre>func FumbleLobbyPlayerJoined(lob *Lobby, player *Player, slot int) {</pre></code></td></tr><tr><td>81</td><td><code><pre>        if config.Constants.FumblePort == &#34;&#34; {</pre></code></td></tr><tr><td>82</td><td><code><pre>                return</pre></code></td></tr><tr><td>83</td><td><code><pre>        }</pre></code></td></tr><tr><td>84</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>85</td><td><code><pre>        _, class, _ := LobbyGetSlotInfoString(lob.Type, slot)</pre></code></td></tr><tr class="miss"><td>86</td><td><code><pre>        fumbleAllowPlayer(lob.ID, strings.ToUpper(class)+&#34;_&#34;+sanitize(player.Name), &#34;&#34;)</pre></code></td></tr><tr><td>87</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FumbleLobbyPlayerJoinedSub">func FumbleLobbyPlayerJoinedSub</div><div class="info"><a href="#s_fn_FumbleLobbyPlayerJoinedSub">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/fumble.go</code>:</p></div><table class="listing">
<tr><td>71</td><td><code><pre>func FumbleLobbyPlayerJoinedSub(lob *Lobby, player *Player, slot int) {</pre></code></td></tr><tr><td>72</td><td><code><pre>        if config.Constants.FumblePort == &#34;&#34; {</pre></code></td></tr><tr><td>73</td><td><code><pre>                return</pre></code></td></tr><tr><td>74</td><td><code><pre>        }</pre></code></td></tr><tr><td>75</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>76</td><td><code><pre>        team, class, _ := LobbyGetSlotInfoString(lob.Type, slot)</pre></code></td></tr><tr class="miss"><td>77</td><td><code><pre>        fumbleAllowPlayer(lob.ID, strings.ToUpper(class)+&#34;_&#34;+sanitize(player.Name), strings.ToUpper(team))</pre></code></td></tr><tr><td>78</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_PlayerStats.PlayedCountIncrease">func PlayerStats.PlayedCountIncrease</div><div class="info"><a href="#s_fn_PlayerStats.PlayedCountIncrease">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/playerStats.go</code>:</p></div><table class="listing">
<tr><td>34</td><td><code><pre>func (ps *PlayerStats) PlayedCountIncrease(lt LobbyType) {</pre></code></td></tr><tr><td>35</td><td><code><pre>        switch lt {</pre></code></td></tr><tr><td>36</td><td><code><pre>        case LobbyTypeSixes:</pre></code></td></tr><tr><td>37</td><td><code><pre>                ps.PlayedSixesCount++</pre></code></td></tr><tr><td>38</td><td><code><pre>        case LobbyTypeHighlander:</pre></code></td></tr><tr class="miss"><td>39</td><td><code><pre>                ps.PlayedHighlanderCount++</pre></code></td></tr><tr><td>40</td><td><code><pre>        case LobbyTypeFours:</pre></code></td></tr><tr class="miss"><td>41</td><td><code><pre>                ps.PlayedFoursCount++</pre></code></td></tr><tr><td>42</td><td><code><pre>        case LobbyTypeBball:</pre></code></td></tr><tr class="miss"><td>43</td><td><code><pre>                ps.PlayedBballCount++</pre></code></td></tr><tr><td>44</td><td><code><pre>        case LobbyTypeUltiduo:</pre></code></td></tr><tr class="miss"><td>45</td><td><code><pre>                ps.PlayedUltiduoCount++</pre></code></td></tr><tr><td>46</td><td><code><pre>        }</pre></code></td></tr><tr><td>47</td><td><code><pre>        database.DB.Save(ps)</pre></code></td></tr><tr><td>48</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_getGamemode">func getGamemode</div><div class="info"><a href="#s_fn_getGamemode">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>227</td><td><code><pre>func getGamemode(mapName string, lobbyType LobbyType) string {</pre></code></td></tr><tr><td>228</td><td><code><pre>        switch {</pre></code></td></tr><tr><td>229</td><td><code><pre>        case strings.HasPrefix(mapName, &#34;koth&#34;):</pre></code></td></tr><tr class="miss"><td>230</td><td><code><pre>                if lobbyType == LobbyTypeUltiduo {</pre></code></td></tr><tr class="miss"><td>231</td><td><code><pre>                        return &#34;ultiduo&#34;</pre></code></td></tr><tr><td>232</td><td><code><pre>                }</pre></code></td></tr><tr><td>233</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>234</td><td><code><pre>                return &#34;koth&#34;</pre></code></td></tr><tr><td>235</td><td><code><pre></pre></code></td></tr><tr><td>236</td><td><code><pre>        case strings.HasPrefix(mapName, &#34;ctf&#34;):</pre></code></td></tr><tr class="miss"><td>237</td><td><code><pre>                if lobbyType == LobbyTypeBball {</pre></code></td></tr><tr class="miss"><td>238</td><td><code><pre>                        return &#34;bball&#34;</pre></code></td></tr><tr><td>239</td><td><code><pre>                }</pre></code></td></tr><tr><td>240</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>241</td><td><code><pre>                return &#34;ctf&#34;</pre></code></td></tr><tr><td>242</td><td><code><pre></pre></code></td></tr><tr><td>243</td><td><code><pre>        case strings.HasPrefix(mapName, &#34;cp&#34;):</pre></code></td></tr><tr><td>244</td><td><code><pre>                if mapName == &#34;cp_gravelpit&#34; {</pre></code></td></tr><tr class="miss"><td>245</td><td><code><pre>                        return &#34;a/d&#34;</pre></code></td></tr><tr><td>246</td><td><code><pre>                }</pre></code></td></tr><tr><td>247</td><td><code><pre></pre></code></td></tr><tr><td>248</td><td><code><pre>                return &#34;5cp&#34;</pre></code></td></tr><tr><td>249</td><td><code><pre></pre></code></td></tr><tr><td>250</td><td><code><pre>        case strings.HasPrefix(mapName, &#34;pl&#34;):</pre></code></td></tr><tr class="miss"><td>251</td><td><code><pre>                return &#34;payload&#34;</pre></code></td></tr><tr><td>252</td><td><code><pre></pre></code></td></tr><tr><td>253</td><td><code><pre>        case strings.HasPrefix(mapName, &#34;arena&#34;):</pre></code></td></tr><tr class="miss"><td>254</td><td><code><pre>                return &#34;arena&#34;</pre></code></td></tr><tr><td>255</td><td><code><pre>        }</pre></code></td></tr><tr><td>256</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>257</td><td><code><pre>        return &#34;unknown&#34;</pre></code></td></tr><tr><td>258</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Player.UpdatePlayerInfo">func Player.UpdatePlayerInfo</div><div class="info"><a href="#s_fn_Player.UpdatePlayerInfo">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player.go</code>:</p></div><table class="listing">
<tr><td>189</td><td><code><pre>func (player *Player) UpdatePlayerInfo() error {</pre></code></td></tr><tr><td>190</td><td><code><pre>        if config.Constants.SteamApiMockUp {</pre></code></td></tr><tr><td>191</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>192</td><td><code><pre>        }</pre></code></td></tr><tr><td>193</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>194</td><td><code><pre>        scraper.SetSteamApiKey(config.Constants.SteamDevApiKey)</pre></code></td></tr><tr class="miss"><td>195</td><td><code><pre>        p, _ := GetPlayerBySteamID(player.SteamID)</pre></code></td></tr><tr><td>196</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>197</td><td><code><pre>        if p != nil {</pre></code></td></tr><tr class="miss"><td>198</td><td><code><pre>                *player = *p</pre></code></td></tr><tr><td>199</td><td><code><pre>        }</pre></code></td></tr><tr><td>200</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>201</td><td><code><pre>        playerInfo, infoErr := scraper.GetPlayerInfo(player.SteamID)</pre></code></td></tr><tr class="miss"><td>202</td><td><code><pre>        if infoErr != nil {</pre></code></td></tr><tr class="miss"><td>203</td><td><code><pre>                return infoErr</pre></code></td></tr><tr><td>204</td><td><code><pre>        }</pre></code></td></tr><tr><td>205</td><td><code><pre></pre></code></td></tr><tr><td>206</td><td><code><pre>        // profile state is 1 when the player have a steam community profile</pre></code></td></tr><tr class="miss"><td>207</td><td><code><pre>        if playerInfo.Profilestate == 1 &amp;&amp; playerInfo.Visibility == &#34;public&#34; {</pre></code></td></tr><tr class="miss"><td>208</td><td><code><pre>                pHours, hErr := scraper.GetTF2Hours(player.SteamID)</pre></code></td></tr><tr><td>209</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>210</td><td><code><pre>                if hErr != nil {</pre></code></td></tr><tr class="miss"><td>211</td><td><code><pre>                        return hErr</pre></code></td></tr><tr><td>212</td><td><code><pre>                }</pre></code></td></tr><tr><td>213</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>214</td><td><code><pre>                player.GameHours = pHours</pre></code></td></tr><tr><td>215</td><td><code><pre>        }</pre></code></td></tr><tr><td>216</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>217</td><td><code><pre>        player.Profileurl = playerInfo.Profileurl</pre></code></td></tr><tr class="miss"><td>218</td><td><code><pre>        player.Avatar = playerInfo.Avatar</pre></code></td></tr><tr class="miss"><td>219</td><td><code><pre>        player.Name = playerInfo.Name</pre></code></td></tr><tr><td>220</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>221</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>222</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecoratePlayerProfileJson">func DecoratePlayerProfileJson</div><div class="info"><a href="#s_fn_DecoratePlayerProfileJson">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player_decorators.go</code>:</p></div><table class="listing">
<tr><td>50</td><td><code><pre>func DecoratePlayerProfileJson(p *Player) PlayerProfile {</pre></code></td></tr><tr class="miss"><td>51</td><td><code><pre>        profile := PlayerProfile{}</pre></code></td></tr><tr class="miss"><td>52</td><td><code><pre>        alias, _ := p.GetSetting(&#34;siteAlias&#34;)</pre></code></td></tr><tr><td>53</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>54</td><td><code><pre>        s := PlayerStats{}</pre></code></td></tr><tr><td>55</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>56</td><td><code><pre>        s.Total = s.TotalLobbies()</pre></code></td></tr><tr class="miss"><td>57</td><td><code><pre>        profile.Stats = s</pre></code></td></tr><tr><td>58</td><td><code><pre></pre></code></td></tr><tr><td>59</td><td><code><pre>        // info</pre></code></td></tr><tr class="miss"><td>60</td><td><code><pre>        if alias.Value != &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>61</td><td><code><pre>                profile.Name = alias.Value</pre></code></td></tr><tr><td>62</td><td><code><pre>        }</pre></code></td></tr><tr><td>63</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>64</td><td><code><pre>        profile.CreatedAt = p.CreatedAt.Unix()</pre></code></td></tr><tr class="miss"><td>65</td><td><code><pre>        profile.GameHours = p.GameHours</pre></code></td></tr><tr class="miss"><td>66</td><td><code><pre>        profile.SteamID = p.SteamID</pre></code></td></tr><tr class="miss"><td>67</td><td><code><pre>        profile.Avatar = p.Avatar</pre></code></td></tr><tr class="miss"><td>68</td><td><code><pre>        profile.Name = p.Name</pre></code></td></tr><tr class="miss"><td>69</td><td><code><pre>        profile.Role = helpers.RoleNames[p.Role]</pre></code></td></tr><tr><td>70</td><td><code><pre></pre></code></td></tr><tr><td>71</td><td><code><pre>        // TODO ban info</pre></code></td></tr><tr><td>72</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>73</td><td><code><pre>        return profile</pre></code></td></tr><tr><td>74</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecorateLobbyConnect">func DecorateLobbyConnect</div><div class="info"><a href="#s_fn_DecorateLobbyConnect">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>216</td><td><code><pre>func DecorateLobbyConnect(lobby *Lobby, name, class string) LobbyConnectData {</pre></code></td></tr><tr class="miss"><td>217</td><td><code><pre>        l := LobbyConnectData{}</pre></code></td></tr><tr class="miss"><td>218</td><td><code><pre>        l.ID = lobby.ID</pre></code></td></tr><tr class="miss"><td>219</td><td><code><pre>        l.Time = lobby.CreatedAt.Unix()</pre></code></td></tr><tr class="miss"><td>220</td><td><code><pre>        l.Pass = lobby.ServerInfo.ServerPassword</pre></code></td></tr><tr><td>221</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>222</td><td><code><pre>        l.Game.Host = lobby.ServerInfo.Host</pre></code></td></tr><tr><td>223</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>224</td><td><code><pre>        l.Mumble.Address = config.Constants.MumbleAddr</pre></code></td></tr><tr class="miss"><td>225</td><td><code><pre>        l.Mumble.Port = config.Constants.MumblePort</pre></code></td></tr><tr class="miss"><td>226</td><td><code><pre>        l.Mumble.Password = config.Constants.MumblePassword</pre></code></td></tr><tr class="miss"><td>227</td><td><code><pre>        l.Mumble.Channel = &#34;match&#34; + strconv.FormatUint(uint64(lobby.ID), 10)</pre></code></td></tr><tr class="miss"><td>228</td><td><code><pre>        l.Mumble.Nick = fmt.Sprintf(&#34;%s_%s&#34;, strings.ToUpper(class), sanitize(name))</pre></code></td></tr><tr><td>229</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>230</td><td><code><pre>        return l</pre></code></td></tr><tr><td>231</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetScrollback">func GetScrollback</div><div class="info"><a href="#s_fn_GetScrollback">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>119</td><td><code><pre>func GetScrollback(room int) ([]*ChatMessage, error) {</pre></code></td></tr><tr class="miss"><td>120</td><td><code><pre>        var messages []*ChatMessage</pre></code></td></tr><tr><td>121</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>122</td><td><code><pre>        err := db.DB.Table(&#34;chat_messages&#34;).Where(&#34;room = ?&#34;, room).Order(&#34;id desc&#34;).Limit(20).Find(&amp;messages).Error</pre></code></td></tr><tr><td>123</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>124</td><td><code><pre>        for _, message := range messages {</pre></code></td></tr><tr class="miss"><td>125</td><td><code><pre>                var player Player</pre></code></td></tr><tr class="miss"><td>126</td><td><code><pre>                if message.Bot {</pre></code></td></tr><tr class="miss"><td>127</td><td><code><pre>                        message.Player = botSummary</pre></code></td></tr><tr><td>128</td><td><code><pre>                } else {</pre></code></td></tr><tr class="miss"><td>129</td><td><code><pre>                        db.DB.First(&amp;player, message.PlayerID)</pre></code></td></tr><tr class="miss"><td>130</td><td><code><pre>                        message.Player = DecoratePlayerSummary(&amp;player)</pre></code></td></tr><tr><td>131</td><td><code><pre>                }</pre></code></td></tr><tr class="miss"><td>132</td><td><code><pre>                message.Timestamp = message.CreatedAt.Unix()</pre></code></td></tr><tr><td>133</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>134</td><td><code><pre>        return messages, err</pre></code></td></tr><tr><td>135</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FumbleLobbyStarted">func FumbleLobbyStarted</div><div class="info"><a href="#s_fn_FumbleLobbyStarted">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/fumble.go</code>:</p></div><table class="listing">
<tr><td>45</td><td><code><pre>func FumbleLobbyStarted(lob_ *Lobby) {</pre></code></td></tr><tr class="miss"><td>46</td><td><code><pre>        if config.Constants.FumblePort == &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>47</td><td><code><pre>                return</pre></code></td></tr><tr><td>48</td><td><code><pre>        }</pre></code></td></tr><tr><td>49</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>50</td><td><code><pre>        var lob Lobby</pre></code></td></tr><tr class="miss"><td>51</td><td><code><pre>        db.DB.Preload(&#34;Slots&#34;).First(&amp;lob, lob_.ID)</pre></code></td></tr><tr><td>52</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>53</td><td><code><pre>        for _, slot := range lob.Slots {</pre></code></td></tr><tr class="miss"><td>54</td><td><code><pre>                team, class, _ := LobbyGetSlotInfoString(lob.Type, slot.Slot)</pre></code></td></tr><tr><td>55</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>56</td><td><code><pre>                var player Player</pre></code></td></tr><tr class="miss"><td>57</td><td><code><pre>                db.DB.First(&amp;player, slot.PlayerID)</pre></code></td></tr><tr><td>58</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>59</td><td><code><pre>                if _, ok := broadcaster.GetSocket(player.SteamID); ok {</pre></code></td></tr><tr><td>60</td><td><code><pre>                        /*var userIp string</pre></code></td></tr><tr><td>61</td><td><code><pre>                        if userIpParts := strings.Split(so.Request().RemoteAddr, &#34;:&#34;); len(userIpParts) == 2 {</pre></code></td></tr><tr><td>62</td><td><code><pre>                                userIp = userIpParts[0]</pre></code></td></tr><tr><td>63</td><td><code><pre>                        } else {</pre></code></td></tr><tr><td>64</td><td><code><pre>                                userIp = so.Request().RemoteAddr</pre></code></td></tr><tr><td>65</td><td><code><pre>                        }*/</pre></code></td></tr><tr class="miss"><td>66</td><td><code><pre>                        fumbleAllowPlayer(lob.ID, strings.ToUpper(class)+&#34;_&#34;+sanitize(player.Name), strings.ToUpper(team))</pre></code></td></tr><tr><td>67</td><td><code><pre>                }</pre></code></td></tr><tr><td>68</td><td><code><pre>        }</pre></code></td></tr><tr><td>69</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_fumbleAllowPlayer">func fumbleAllowPlayer</div><div class="info"><a href="#s_fn_fumbleAllowPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/fumble.go</code>:</p></div><table class="listing">
<tr><td>28</td><td><code><pre>func fumbleAllowPlayer(lobbyId uint, playerName string, playerTeam string) error {</pre></code></td></tr><tr class="miss"><td>29</td><td><code><pre>        if config.Constants.FumblePort == &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>30</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>31</td><td><code><pre>        }</pre></code></td></tr><tr><td>32</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>33</td><td><code><pre>        user := mumble.User{}</pre></code></td></tr><tr class="miss"><td>34</td><td><code><pre>        user.Name = playerName</pre></code></td></tr><tr class="miss"><td>35</td><td><code><pre>        user.Team = mumble.Team(playerTeam)</pre></code></td></tr><tr><td>36</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>37</td><td><code><pre>        err := call(config.Constants.FumblePort, &#34;Fumble.AllowPlayer&#34;, &amp;mumble.LobbyArgs{user, lobbyId}, &amp;struct{}{})</pre></code></td></tr><tr class="miss"><td>38</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>39</td><td><code><pre>                helpers.Logger.Warning(err.Error())</pre></code></td></tr><tr><td>40</td><td><code><pre>        }</pre></code></td></tr><tr><td>41</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>42</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>43</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_call">func call</div><div class="info"><a href="#s_fn_call">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>35</td><td><code><pre>func call(addr, method string, args, reply interface{}) error {</pre></code></td></tr><tr class="miss"><td>36</td><td><code><pre>        client, err := rpc.DialHTTP(&#34;tcp&#34;, &#34;localhost:&#34;+addr)</pre></code></td></tr><tr class="miss"><td>37</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>38</td><td><code><pre>                for err != nil {</pre></code></td></tr><tr class="miss"><td>39</td><td><code><pre>                        time.Sleep(1 * time.Second)</pre></code></td></tr><tr class="miss"><td>40</td><td><code><pre>                        client, err = rpc.DialHTTP(&#34;tcp&#34;, &#34;localhost:&#34;+addr)</pre></code></td></tr><tr><td>41</td><td><code><pre>                }</pre></code></td></tr><tr><td>42</td><td><code><pre>        }</pre></code></td></tr><tr><td>43</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>44</td><td><code><pre>        err = client.Call(method, args, reply)</pre></code></td></tr><tr class="miss"><td>45</td><td><code><pre>        client.Close()</pre></code></td></tr><tr class="miss"><td>46</td><td><code><pre>        return err</pre></code></td></tr><tr><td>47</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_SubAndRemove">func SubAndRemove</div><div class="info"><a href="#s_fn_SubAndRemove">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/substitute.go</code>:</p></div><table class="listing">
<tr><td>64</td><td><code><pre>func SubAndRemove(lobby *Lobby, player *Player) error {</pre></code></td></tr><tr class="miss"><td>65</td><td><code><pre>        sub, err := NewSub(lobby.ID, player.ID)</pre></code></td></tr><tr class="miss"><td>66</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>67</td><td><code><pre>                return err</pre></code></td></tr><tr><td>68</td><td><code><pre>        }</pre></code></td></tr><tr><td>69</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>70</td><td><code><pre>        db.DB.Save(sub)</pre></code></td></tr><tr class="miss"><td>71</td><td><code><pre>        if tperr := lobby.RemovePlayer(player); tperr != nil {</pre></code></td></tr><tr class="miss"><td>72</td><td><code><pre>                return tperr</pre></code></td></tr><tr><td>73</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>74</td><td><code><pre>        BroadcastSubList()</pre></code></td></tr><tr><td>75</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>76</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>77</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_InitializeLobbySettings">func InitializeLobbySettings</div><div class="info"><a href="#s_fn_InitializeLobbySettings">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>123</td><td><code><pre>func InitializeLobbySettings(fileName string) {</pre></code></td></tr><tr class="miss"><td>124</td><td><code><pre>        realPath, err := filepath.Abs(fileName)</pre></code></td></tr><tr class="miss"><td>125</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>126</td><td><code><pre>                helpers.Logger.Fatal(err.Error())</pre></code></td></tr><tr class="miss"><td>127</td><td><code><pre>                return</pre></code></td></tr><tr><td>128</td><td><code><pre>        }</pre></code></td></tr><tr><td>129</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>130</td><td><code><pre>        err = LoadLobbySettingsFromFile(realPath)</pre></code></td></tr><tr class="miss"><td>131</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>132</td><td><code><pre>                helpers.Logger.Fatal(err.Error())</pre></code></td></tr><tr><td>133</td><td><code><pre>        }</pre></code></td></tr><tr><td>134</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FumbleLobbyCreated">func FumbleLobbyCreated</div><div class="info"><a href="#s_fn_FumbleLobbyCreated">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/fumble.go</code>:</p></div><table class="listing">
<tr><td>13</td><td><code><pre>func FumbleLobbyCreated(lob *Lobby) error {</pre></code></td></tr><tr class="miss"><td>14</td><td><code><pre>        if config.Constants.FumblePort == &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>15</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>16</td><td><code><pre>        }</pre></code></td></tr><tr><td>17</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>18</td><td><code><pre>        err := call(config.Constants.FumblePort, &#34;Fumble.CreateLobby&#34;, lob.ID, &amp;struct{}{})</pre></code></td></tr><tr><td>19</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>20</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>21</td><td><code><pre>                helpers.Logger.Warning(err.Error())</pre></code></td></tr><tr class="miss"><td>22</td><td><code><pre>                return err</pre></code></td></tr><tr><td>23</td><td><code><pre>        }</pre></code></td></tr><tr><td>24</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>25</td><td><code><pre>        return nil</pre></code></td></tr><tr><td>26</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_IsPlayerInServer">func IsPlayerInServer</div><div class="info"><a href="#s_fn_IsPlayerInServer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>98</td><td><code><pre>func IsPlayerInServer(steamid string) (reply bool) {</pre></code></td></tr><tr class="miss"><td>99</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr class="miss"><td>100</td><td><code><pre>                return false</pre></code></td></tr><tr><td>101</td><td><code><pre>        }</pre></code></td></tr><tr><td>102</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>103</td><td><code><pre>        args := &amp;Args{SteamId: steamid}</pre></code></td></tr><tr class="miss"><td>104</td><td><code><pre>        call(config.Constants.PaulingPort, &#34;Pauling.IsPlayerInServer&#34;, &amp;args, &amp;reply)</pre></code></td></tr><tr><td>105</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>106</td><td><code><pre>        return</pre></code></td></tr><tr><td>107</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_FumbleLobbyEnded">func FumbleLobbyEnded</div><div class="info"><a href="#s_fn_FumbleLobbyEnded">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/fumble.go</code>:</p></div><table class="listing">
<tr><td>89</td><td><code><pre>func FumbleLobbyEnded(lob *Lobby) {</pre></code></td></tr><tr class="miss"><td>90</td><td><code><pre>        if config.Constants.FumblePort == &#34;&#34; {</pre></code></td></tr><tr class="miss"><td>91</td><td><code><pre>                return</pre></code></td></tr><tr><td>92</td><td><code><pre>        }</pre></code></td></tr><tr><td>93</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>94</td><td><code><pre>        err := call(config.Constants.FumblePort, &#34;Fumble.EndLobby&#34;, lob.ID, nil)</pre></code></td></tr><tr class="miss"><td>95</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>96</td><td><code><pre>                helpers.Logger.Warning(err.Error())</pre></code></td></tr><tr><td>97</td><td><code><pre>        }</pre></code></td></tr><tr><td>98</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_sanitize">func sanitize</div><div class="info"><a href="#s_fn_sanitize">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>205</td><td><code><pre>func sanitize(name string) string {</pre></code></td></tr><tr class="miss"><td>206</td><td><code><pre>        var final string</pre></code></td></tr><tr class="miss"><td>207</td><td><code><pre>        for _, c := range name {</pre></code></td></tr><tr class="miss"><td>208</td><td><code><pre>                if c &gt;= &#39;A&#39; &amp;&amp; c &lt;= &#39;z&#39; {</pre></code></td></tr><tr class="miss"><td>209</td><td><code><pre>                        final += string(c)</pre></code></td></tr><tr><td>210</td><td><code><pre>                }</pre></code></td></tr><tr><td>211</td><td><code><pre>        }</pre></code></td></tr><tr><td>212</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>213</td><td><code><pre>        return final</pre></code></td></tr><tr><td>214</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.SetupServer">func Lobby.SetupServer</div><div class="info"><a href="#s_fn_Lobby.SetupServer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>638</td><td><code><pre>func (lobby *Lobby) SetupServer() error {</pre></code></td></tr><tr class="miss"><td>639</td><td><code><pre>        if lobby.State == LobbyStateEnded {</pre></code></td></tr><tr class="miss"><td>640</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>641</td><td><code><pre>        }</pre></code></td></tr><tr><td>642</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>643</td><td><code><pre>        err := SetupServer(lobby.ID, lobby.ServerInfo, lobby.Type, lobby.League, lobby.Whitelist, lobby.MapName)</pre></code></td></tr><tr class="miss"><td>644</td><td><code><pre>        return err</pre></code></td></tr><tr><td>645</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_CheckConnection">func CheckConnection</div><div class="info"><a href="#s_fn_CheckConnection">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>49</td><td><code><pre>func CheckConnection() {</pre></code></td></tr><tr class="miss"><td>50</td><td><code><pre>        err := call(config.Constants.PaulingPort, &#34;Pauling.Test&#34;, struct{}{}, &amp;struct{}{})</pre></code></td></tr><tr class="miss"><td>51</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>52</td><td><code><pre>                helpers.Logger.Fatal(err.Error())</pre></code></td></tr><tr><td>53</td><td><code><pre>        }</pre></code></td></tr><tr><td>54</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>55</td><td><code><pre>        helpers.Logger.Debug(&#34;Able to connect to Pauling&#34;)</pre></code></td></tr><tr><td>56</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecoratePlayerSettingsJson">func DecoratePlayerSettingsJson</div><div class="info"><a href="#s_fn_DecoratePlayerSettingsJson">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/player_decorators.go</code>:</p></div><table class="listing">
<tr><td>35</td><td><code><pre>func DecoratePlayerSettingsJson(settings []PlayerSetting) *simplejson.Json {</pre></code></td></tr><tr class="miss"><td>36</td><td><code><pre>        json := simplejson.New()</pre></code></td></tr><tr><td>37</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>38</td><td><code><pre>        for _, obj := range settings {</pre></code></td></tr><tr class="miss"><td>39</td><td><code><pre>                json.Set(obj.Key, obj.Value)</pre></code></td></tr><tr><td>40</td><td><code><pre>        }</pre></code></td></tr><tr><td>41</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>42</td><td><code><pre>        return json</pre></code></td></tr><tr><td>43</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LoadLobbySettingsFromFile">func LoadLobbySettingsFromFile</div><div class="info"><a href="#s_fn_LoadLobbySettingsFromFile">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>136</td><td><code><pre>func LoadLobbySettingsFromFile(fileName string) error {</pre></code></td></tr><tr class="miss"><td>137</td><td><code><pre>        data, err := ioutil.ReadFile(fileName)</pre></code></td></tr><tr class="miss"><td>138</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>139</td><td><code><pre>                return err</pre></code></td></tr><tr><td>140</td><td><code><pre>        }</pre></code></td></tr><tr><td>141</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>142</td><td><code><pre>        return LoadLobbySettings(data)</pre></code></td></tr><tr><td>143</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_SetupServer">func SetupServer</div><div class="info"><a href="#s_fn_SetupServer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>66</td><td><code><pre>func SetupServer(lobbyId uint, info ServerRecord, lobbyType LobbyType, league string,</pre></code></td></tr><tr><td>67</td><td><code><pre>        whitelist string, mapName string) error {</pre></code></td></tr><tr class="miss"><td>68</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr class="miss"><td>69</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>70</td><td><code><pre>        }</pre></code></td></tr><tr><td>71</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>72</td><td><code><pre>        args := &amp;Args{</pre></code></td></tr><tr><td>73</td><td><code><pre>                Id:        lobbyId,</pre></code></td></tr><tr><td>74</td><td><code><pre>                Info:      info,</pre></code></td></tr><tr><td>75</td><td><code><pre>                Type:      lobbyType,</pre></code></td></tr><tr><td>76</td><td><code><pre>                League:    league,</pre></code></td></tr><tr><td>77</td><td><code><pre>                Whitelist: whitelist,</pre></code></td></tr><tr><td>78</td><td><code><pre>                Map:       mapName}</pre></code></td></tr><tr class="miss"><td>79</td><td><code><pre>        return call(config.Constants.PaulingPort, &#34;Pauling.SetupServer&#34;, args, &amp;Args{})</pre></code></td></tr><tr><td>80</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.IsSlotFilled">func Lobby.IsSlotFilled</div><div class="info"><a href="#s_fn_Lobby.IsSlotFilled">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>629</td><td><code><pre>func (lobby *Lobby) IsSlotFilled(slot int) bool {</pre></code></td></tr><tr class="miss"><td>630</td><td><code><pre>        _, err := lobby.GetPlayerIDBySlot(slot)</pre></code></td></tr><tr class="miss"><td>631</td><td><code><pre>        if err != nil {</pre></code></td></tr><tr class="miss"><td>632</td><td><code><pre>                return false</pre></code></td></tr><tr><td>633</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>634</td><td><code><pre>        return true</pre></code></td></tr><tr><td>635</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_ReExecConfig">func ReExecConfig</div><div class="info"><a href="#s_fn_ReExecConfig">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>82</td><td><code><pre>func ReExecConfig(lobbyId uint) error {</pre></code></td></tr><tr class="miss"><td>83</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr class="miss"><td>84</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>85</td><td><code><pre>        }</pre></code></td></tr><tr><td>86</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>87</td><td><code><pre>        return call(config.Constants.PaulingPort, &#34;Pauling.ReExecConfig&#34;, &amp;Args{Id: lobbyId}, &amp;Args{})</pre></code></td></tr><tr><td>88</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_ChatMessage.Send">func ChatMessage.Send</div><div class="info"><a href="#s_fn_ChatMessage.Send">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>72</td><td><code><pre>func (m *ChatMessage) Send() {</pre></code></td></tr><tr class="miss"><td>73</td><td><code><pre>        broadcaster.SendMessageToRoom(fmt.Sprintf(&#34;%d_public&#34;, m.Room), &#34;chatReceive&#34;, m)</pre></code></td></tr><tr class="miss"><td>74</td><td><code><pre>        if m.Room != 0 {</pre></code></td></tr><tr class="miss"><td>75</td><td><code><pre>                broadcaster.SendMessageToRoom(fmt.Sprintf(&#34;%d_private&#34;, m.Room), &#34;chatReceive&#34;, m)</pre></code></td></tr><tr><td>76</td><td><code><pre>        }</pre></code></td></tr><tr><td>77</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewRequirement">func NewRequirement</div><div class="info"><a href="#s_fn_NewRequirement">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>145</td><td><code><pre>func NewRequirement(lobbyID uint, slot int, hours int, lobbies int) *Requirement {</pre></code></td></tr><tr class="miss"><td>146</td><td><code><pre>        r := &amp;Requirement{</pre></code></td></tr><tr><td>147</td><td><code><pre>                LobbyID: lobbyID,</pre></code></td></tr><tr><td>148</td><td><code><pre>                Slot:    slot,</pre></code></td></tr><tr><td>149</td><td><code><pre>                Hours:   hours,</pre></code></td></tr><tr><td>150</td><td><code><pre>                Lobbies: lobbies}</pre></code></td></tr><tr class="miss"><td>151</td><td><code><pre>        db.DB.Save(r)</pre></code></td></tr><tr><td>152</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>153</td><td><code><pre>        return r</pre></code></td></tr><tr><td>154</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_GetLobbyWhitelist">func GetLobbyWhitelist</div><div class="info"><a href="#s_fn_GetLobbyWhitelist">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobbySettings.go</code>:</p></div><table class="listing">
<tr><td>116</td><td><code><pre>func GetLobbyWhitelist(whitelistId int) (*LobbyWhitelist, bool) {</pre></code></td></tr><tr class="miss"><td>117</td><td><code><pre>        if whitelist, ok := lobbyWhitelistFromID[whitelistId]; ok {</pre></code></td></tr><tr class="miss"><td>118</td><td><code><pre>                return &amp;LobbyWhitelists[whitelist], true</pre></code></td></tr><tr><td>119</td><td><code><pre>        }</pre></code></td></tr><tr class="miss"><td>120</td><td><code><pre>        return nil, false</pre></code></td></tr><tr><td>121</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.CurrentState">func Lobby.CurrentState</div><div class="info"><a href="#s_fn_Lobby.CurrentState">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>281</td><td><code><pre>func (l *Lobby) CurrentState() LobbyState {</pre></code></td></tr><tr class="miss"><td>282</td><td><code><pre>        var state int</pre></code></td></tr><tr class="miss"><td>283</td><td><code><pre>        db.DB.DB().QueryRow(&#34;SELECT state FROM lobbies WHERE id = $1&#34;, l.ID).Scan(&amp;state)</pre></code></td></tr><tr class="miss"><td>284</td><td><code><pre>        return LobbyState(state)</pre></code></td></tr><tr><td>285</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_VerifyInfo">func VerifyInfo</div><div class="info"><a href="#s_fn_VerifyInfo">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/pauling.go</code>:</p></div><table class="listing">
<tr><td>90</td><td><code><pre>func VerifyInfo(info ServerRecord) error {</pre></code></td></tr><tr class="miss"><td>91</td><td><code><pre>        if config.Constants.ServerMockUp {</pre></code></td></tr><tr class="miss"><td>92</td><td><code><pre>                return nil</pre></code></td></tr><tr><td>93</td><td><code><pre>        }</pre></code></td></tr><tr><td>94</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>95</td><td><code><pre>        return call(config.Constants.PaulingPort, &#34;Pauling.VerifyInfo&#34;, &amp;info, &amp;Args{})</pre></code></td></tr><tr><td>96</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_@741:32">func @741:32</div><div class="info"><a href="#s_fn_@741:32">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>741</td><td><code><pre>func() {</pre></code></td></tr><tr class="miss"><td>742</td><td><code><pre>                if lobby.CurrentState() != LobbyStateEnded {</pre></code></td></tr><tr class="miss"><td>743</td><td><code><pre>                        lobby.SubNotInGamePlayers()</pre></code></td></tr><tr><td>744</td><td><code><pre>                }</pre></code></td></tr><tr><td>745</td><td><code><pre>        }</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.Start">func Lobby.Start</div><div class="info"><a href="#s_fn_Lobby.Start">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>739</td><td><code><pre>func (lobby *Lobby) Start() {</pre></code></td></tr><tr class="miss"><td>740</td><td><code><pre>        db.DB.Table(&#34;lobbies&#34;).Where(&#34;id = ?&#34;, lobby.ID).Update(&#34;state&#34;, LobbyStateInProgress)</pre></code></td></tr><tr class="miss"><td>741</td><td><code><pre>        time.AfterFunc(time.Minute*5, func() {</pre></code></td></tr><tr><td>742</td><td><code><pre>                if lobby.CurrentState() != LobbyStateEnded {</pre></code></td></tr><tr><td>743</td><td><code><pre>                        lobby.SubNotInGamePlayers()</pre></code></td></tr><tr><td>744</td><td><code><pre>                }</pre></code></td></tr><tr><td>745</td><td><code><pre>        })</pre></code></td></tr><tr><td>746</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewPlayerStats">func NewPlayerStats</div><div class="info"><a href="#s_fn_NewPlayerStats">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/playerStats.go</code>:</p></div><table class="listing">
<tr><td>24</td><td><code><pre>func NewPlayerStats() PlayerStats {</pre></code></td></tr><tr class="miss"><td>25</td><td><code><pre>        stats := PlayerStats{}</pre></code></td></tr><tr><td>26</td><td><code><pre></pre></code></td></tr><tr class="miss"><td>27</td><td><code><pre>        return stats</pre></code></td></tr><tr><td>28</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LobbyData.SendToPlayer">func LobbyData.SendToPlayer</div><div class="info"><a href="#s_fn_LobbyData.SendToPlayer">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>190</td><td><code><pre>func (l LobbyData) SendToPlayer(steamid string) {</pre></code></td></tr><tr class="miss"><td>191</td><td><code><pre>        broadcaster.SendMessage(steamid, &#34;lobbyData&#34;, l)</pre></code></td></tr><tr><td>192</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_DecorateLobbyJoin">func DecorateLobbyJoin</div><div class="info"><a href="#s_fn_DecorateLobbyJoin">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>233</td><td><code><pre>func DecorateLobbyJoin(lobby *Lobby) LobbyEvent {</pre></code></td></tr><tr class="miss"><td>234</td><td><code><pre>        return LobbyEvent{lobby.ID}</pre></code></td></tr><tr><td>235</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_NewInGameChatMessage">func NewInGameChatMessage</div><div class="info"><a href="#s_fn_NewInGameChatMessage">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/chat.go</code>:</p></div><table class="listing">
<tr><td>57</td><td><code><pre>func NewInGameChatMessage(lobby *Lobby, player *Player, message string) *ChatMessage {</pre></code></td></tr><tr class="miss"><td>58</td><td><code><pre>        return &amp;ChatMessage{</pre></code></td></tr><tr><td>59</td><td><code><pre>                Timestamp: time.Now().Unix(),</pre></code></td></tr><tr><td>60</td><td><code><pre></pre></code></td></tr><tr><td>61</td><td><code><pre>                PlayerID: player.ID,</pre></code></td></tr><tr><td>62</td><td><code><pre>                Player:   DecoratePlayerSummary(player),</pre></code></td></tr><tr><td>63</td><td><code><pre></pre></code></td></tr><tr><td>64</td><td><code><pre>                Room:    int(lobby.ID),</pre></code></td></tr><tr><td>65</td><td><code><pre>                Message: message,</pre></code></td></tr><tr><td>66</td><td><code><pre>                InGame:  true,</pre></code></td></tr><tr><td>67</td><td><code><pre>        }</pre></code></td></tr><tr><td>68</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.IsFull">func Lobby.IsFull</div><div class="info"><a href="#s_fn_Lobby.IsFull">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>624</td><td><code><pre>func (lobby *Lobby) IsFull() bool {</pre></code></td></tr><tr class="miss"><td>625</td><td><code><pre>        return lobby.GetPlayerNumber() == 2*NumberOfClassesMap[lobby.Type]</pre></code></td></tr><tr><td>626</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_BroadcastLobbyToUser">func BroadcastLobbyToUser</div><div class="info"><a href="#s_fn_BroadcastLobbyToUser">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>773</td><td><code><pre>func BroadcastLobbyToUser(lobby *Lobby, steamid string) {</pre></code></td></tr><tr><td>774</td><td><code><pre>        //db.DB.Preload(&#34;Spectators&#34;).First(&amp;lobby, lobby.ID)</pre></code></td></tr><tr class="miss"><td>775</td><td><code><pre>        broadcaster.SendMessage(steamid, &#34;lobbyData&#34;, DecorateLobbyData(lobby, true))</pre></code></td></tr><tr><td>776</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.ReadyUpTimeLeft">func Lobby.ReadyUpTimeLeft</div><div class="info"><a href="#s_fn_Lobby.ReadyUpTimeLeft">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>578</td><td><code><pre>func (lobby *Lobby) ReadyUpTimeLeft() int64 {</pre></code></td></tr><tr class="miss"><td>579</td><td><code><pre>        return int64(lobby.ReadyUpTimestamp - time.Now().Unix())</pre></code></td></tr><tr><td>580</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_Lobby.LobbyData">func Lobby.LobbyData</div><div class="info"><a href="#s_fn_Lobby.LobbyData">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby.go</code>:</p></div><table class="listing">
<tr><td>787</td><td><code><pre>func (l *Lobby) LobbyData(include bool) LobbyData {</pre></code></td></tr><tr class="miss"><td>788</td><td><code><pre>        return DecorateLobbyData(l, include)</pre></code></td></tr><tr><td>789</td><td><code><pre>}</pre></code></td></tr></table>

<div class="funcname" id="fn_LobbyData.Send">func LobbyData.Send</div><div class="info"><a href="#s_fn_LobbyData.Send">Back</a><p>In <code>/home/ubuntu/.go_project/src/github.com/TF2Stadium/Helen/models/lobby_decorators.go</code>:</p></div><table class="listing">
<tr><td>186</td><td><code><pre>func (l LobbyData) Send() {</pre></code></td></tr><tr class="miss"><td>187</td><td><code><pre>        broadcaster.SendMessageToRoom(fmt.Sprintf(&#34;%d_public&#34;, l.ID), &#34;lobbyData&#34;, l)</pre></code></td></tr><tr><td>188</td><td><code><pre>}</pre></code></td></tr></table>

<!-- Can be parsed by external script
PACKAGE:github.com/TF2Stadium/Helen/models DONE:68.31
-->

<div id="summaryWrapper"><div class="package">github.com/TF2Stadium/Helen/models</div>
<div id="totalcov">68.31%</div>
</div>
    </body>
